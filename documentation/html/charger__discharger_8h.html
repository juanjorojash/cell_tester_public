<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Multichemistry cell charge and discharge system: charger_discharger.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Multichemistry cell charge and discharge system
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">charger_discharger.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>State machine header file for Charge and Discharge System.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;xc.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="charger__discharger_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a024148e99a7143db044a48216664d03d"><td class="memItemLeft" align="right" valign="top"><a id="a024148e99a7143db044a48216664d03d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a024148e99a7143db044a48216664d03d">_XTAL_FREQ</a>&#160;&#160;&#160;32000000</td></tr>
<tr class="memdesc:a024148e99a7143db044a48216664d03d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frequency to coordinate delays, 32 MHz. <br /></td></tr>
<tr class="separator:a024148e99a7143db044a48216664d03d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadc49366a240cc84254d58cb455dee82"><td class="memItemLeft" align="right" valign="top"><a id="aadc49366a240cc84254d58cb455dee82"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aadc49366a240cc84254d58cb455dee82">ERR_MAX</a>&#160;&#160;&#160;500</td></tr>
<tr class="memdesc:aadc49366a240cc84254d58cb455dee82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum permisible error, useful to avoid ringing. <br /></td></tr>
<tr class="separator:aadc49366a240cc84254d58cb455dee82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcad3156af59109b8ac2c78c588885a"><td class="memItemLeft" align="right" valign="top"><a id="a5bcad3156af59109b8ac2c78c588885a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a5bcad3156af59109b8ac2c78c588885a">ERR_MIN</a>&#160;&#160;&#160;-500</td></tr>
<tr class="memdesc:a5bcad3156af59109b8ac2c78c588885a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum permisible error, useful to avoid ringing. <br /></td></tr>
<tr class="separator:a5bcad3156af59109b8ac2c78c588885a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a420d619b855e71d5e8d4c26e2d0a0461"><td class="memItemLeft" align="right" valign="top"><a id="a420d619b855e71d5e8d4c26e2d0a0461"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a420d619b855e71d5e8d4c26e2d0a0461">V_CHAN</a>&#160;&#160;&#160;0b01010</td></tr>
<tr class="memdesc:a420d619b855e71d5e8d4c26e2d0a0461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of ADC channel for voltage measurements. AN10(RB1) <br /></td></tr>
<tr class="separator:a420d619b855e71d5e8d4c26e2d0a0461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72da0b033e023b574cca6ab663e25fca"><td class="memItemLeft" align="right" valign="top"><a id="a72da0b033e023b574cca6ab663e25fca"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a72da0b033e023b574cca6ab663e25fca">I_CHAN</a>&#160;&#160;&#160;0b01100</td></tr>
<tr class="memdesc:a72da0b033e023b574cca6ab663e25fca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of ADC channel for current measurements. AN12(RB0) <br /></td></tr>
<tr class="separator:a72da0b033e023b574cca6ab663e25fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10ddb4ca8b21ecdf02ab19d67cb9142c"><td class="memItemLeft" align="right" valign="top"><a id="a10ddb4ca8b21ecdf02ab19d67cb9142c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a10ddb4ca8b21ecdf02ab19d67cb9142c">T_CHAN</a>&#160;&#160;&#160;0b00100</td></tr>
<tr class="memdesc:a10ddb4ca8b21ecdf02ab19d67cb9142c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of ADC channel for temperature measurements. AN4(RA5) <br /></td></tr>
<tr class="separator:a10ddb4ca8b21ecdf02ab19d67cb9142c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9c25e86679ce9f50b90bb24cb4cb0e"><td class="memItemLeft" align="right" valign="top"><a id="a1e9c25e86679ce9f50b90bb24cb4cb0e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a1e9c25e86679ce9f50b90bb24cb4cb0e">CELL1_ON</a>()&#160;&#160;&#160;{ RB2 = 1; }</td></tr>
<tr class="memdesc:a1e9c25e86679ce9f50b90bb24cb4cb0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on Cell #1. <br /></td></tr>
<tr class="separator:a1e9c25e86679ce9f50b90bb24cb4cb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60e0c2428211d907b105684c342a328b"><td class="memItemLeft" align="right" valign="top"><a id="a60e0c2428211d907b105684c342a328b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a60e0c2428211d907b105684c342a328b">CELL2_ON</a>()&#160;&#160;&#160;{ RB3 = 1; }</td></tr>
<tr class="memdesc:a60e0c2428211d907b105684c342a328b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on Cell #2. <br /></td></tr>
<tr class="separator:a60e0c2428211d907b105684c342a328b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83bd4e8fdca326c574ea1a8d5681041a"><td class="memItemLeft" align="right" valign="top"><a id="a83bd4e8fdca326c574ea1a8d5681041a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a83bd4e8fdca326c574ea1a8d5681041a">CELL3_ON</a>()&#160;&#160;&#160;{ RB4 = 1; }</td></tr>
<tr class="memdesc:a83bd4e8fdca326c574ea1a8d5681041a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on Cell #3. <br /></td></tr>
<tr class="separator:a83bd4e8fdca326c574ea1a8d5681041a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6de72b4cd58814b85d05c7448fb498"><td class="memItemLeft" align="right" valign="top"><a id="a7c6de72b4cd58814b85d05c7448fb498"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a7c6de72b4cd58814b85d05c7448fb498">CELL4_ON</a>()&#160;&#160;&#160;{ RB5 = 1; }</td></tr>
<tr class="memdesc:a7c6de72b4cd58814b85d05c7448fb498"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn on Cell #4. <br /></td></tr>
<tr class="separator:a7c6de72b4cd58814b85d05c7448fb498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d22532f168369b94569754b7f7ab68a"><td class="memItemLeft" align="right" valign="top"><a id="a5d22532f168369b94569754b7f7ab68a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a5d22532f168369b94569754b7f7ab68a">CELL1_OFF</a>()&#160;&#160;&#160;{ RB2 = 0; }</td></tr>
<tr class="memdesc:a5d22532f168369b94569754b7f7ab68a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off Cell #1. <br /></td></tr>
<tr class="separator:a5d22532f168369b94569754b7f7ab68a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c4d70ae1140ba070196ee2849ebe6a"><td class="memItemLeft" align="right" valign="top"><a id="a90c4d70ae1140ba070196ee2849ebe6a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a90c4d70ae1140ba070196ee2849ebe6a">CELL2_OFF</a>()&#160;&#160;&#160;{ RB3 = 0; }</td></tr>
<tr class="memdesc:a90c4d70ae1140ba070196ee2849ebe6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off Cell #2. <br /></td></tr>
<tr class="separator:a90c4d70ae1140ba070196ee2849ebe6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc5d280d7d71f8a100ebf4cbc527ed32"><td class="memItemLeft" align="right" valign="top"><a id="adc5d280d7d71f8a100ebf4cbc527ed32"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#adc5d280d7d71f8a100ebf4cbc527ed32">CELL3_OFF</a>()&#160;&#160;&#160;{ RB4 = 0; }</td></tr>
<tr class="memdesc:adc5d280d7d71f8a100ebf4cbc527ed32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off Cell #3. <br /></td></tr>
<tr class="separator:adc5d280d7d71f8a100ebf4cbc527ed32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a856ad78c73c34cd8f5d366bac3291b62"><td class="memItemLeft" align="right" valign="top"><a id="a856ad78c73c34cd8f5d366bac3291b62"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a856ad78c73c34cd8f5d366bac3291b62">CELL4_OFF</a>()&#160;&#160;&#160;{ RB5 = 0; }</td></tr>
<tr class="memdesc:a856ad78c73c34cd8f5d366bac3291b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn off Cell #4. <br /></td></tr>
<tr class="separator:a856ad78c73c34cd8f5d366bac3291b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a450cfb6cea2848f3c6459ed5c0df9eef"><td class="memItemLeft" align="right" valign="top"><a id="a450cfb6cea2848f3c6459ed5c0df9eef"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a450cfb6cea2848f3c6459ed5c0df9eef">AD_SET_CHAN</a>(x)&#160;&#160;&#160;{ ADCON0bits.CHS = x; __delay_us(5); }</td></tr>
<tr class="memdesc:a450cfb6cea2848f3c6459ed5c0df9eef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the ADC channel to <code>x</code> and wait for 5 microseconds. <br /></td></tr>
<tr class="separator:a450cfb6cea2848f3c6459ed5c0df9eef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f8ee4c55d0b9230535c602e01dbbdc"><td class="memItemLeft" align="right" valign="top"><a id="a57f8ee4c55d0b9230535c602e01dbbdc"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a57f8ee4c55d0b9230535c602e01dbbdc">AD_CONVERT</a>()&#160;&#160;&#160;{ GO_nDONE = 1; while(GO_nDONE);}</td></tr>
<tr class="memdesc:a57f8ee4c55d0b9230535c602e01dbbdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start the conversion and wait until it is finished. <br /></td></tr>
<tr class="separator:a57f8ee4c55d0b9230535c602e01dbbdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049dca77d5e2be6f3780ce6a632a5ef3"><td class="memItemLeft" align="right" valign="top"><a id="a049dca77d5e2be6f3780ce6a632a5ef3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a049dca77d5e2be6f3780ce6a632a5ef3">AD_RESULT</a>()&#160;&#160;&#160;{ ad_res = 0; ad_res = (ADRESL &amp; 0xFF)|((ADRESH &lt;&lt; 8) &amp; 0xF00);}</td></tr>
<tr class="memdesc:a049dca77d5e2be6f3780ce6a632a5ef3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store conversion result in #ad_res. <br /></td></tr>
<tr class="separator:a049dca77d5e2be6f3780ce6a632a5ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1cb4a0872e924cf862a97b33dd2edf0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ae1cb4a0872e924cf862a97b33dd2edf0">STOP_CONVERTER</a>()&#160;&#160;&#160;{ RC3 = 0; RC4 = 0; <a class="el" href="charger__discharger_8h.html#ad08b23d03ea817ae428dd1cc1e1d8f1a">conv</a> = 0; RC5 = 0; <a class="el" href="charger__discharger_8h.html#adb07fc3f35b1ac3f277f3c4b80ce2269">dc</a> = <a class="el" href="charger__discharger_8h.html#a998e4507851dde706a60a5b475eb27ca">DC_MIN</a>; <a class="el" href="charger__discharger_8h.html#a93f3630c962d9bcafd71e4c4a03547c1">set_DC</a>(); <a class="el" href="charger__discharger_8h.html#a5bbc85db8cf08142e0984d07b97e722b">Cell_OFF</a>(); <a class="el" href="charger__discharger_8h.html#a2f57a3156036b713dc852737da390252">LOG_OFF</a>();}</td></tr>
<tr class="memdesc:ae1cb4a0872e924cf862a97b33dd2edf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the converter.  <a href="#ae1cb4a0872e924cf862a97b33dd2edf0">More...</a><br /></td></tr>
<tr class="separator:ae1cb4a0872e924cf862a97b33dd2edf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82e63c19888e2828c2f23d2190c37533"><td class="memItemLeft" align="right" valign="top"><a id="a82e63c19888e2828c2f23d2190c37533"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SET_DISC</b>()&#160;&#160;&#160;{ RC3 = 0; RC4 = 0; __delay_ms(100); RC3 = 1; __delay_ms(100); RC3 = 0; __delay_ms(100); RC5 = 1; __delay_ms(100);}</td></tr>
<tr class="separator:a82e63c19888e2828c2f23d2190c37533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ce795688198fe139d1ab1811bde267"><td class="memItemLeft" align="right" valign="top"><a id="aa8ce795688198fe139d1ab1811bde267"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SET_CHAR</b>()&#160;&#160;&#160;{ RC3 = 0; RC4 = 0; __delay_ms(100); RC4 = 1; __delay_ms(100); RC4 = 0; __delay_ms(100); RC5 = 1; __delay_ms(100);}</td></tr>
<tr class="separator:aa8ce795688198fe139d1ab1811bde267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda4f577829f9d4ff58b9636903cbfe0"><td class="memItemLeft" align="right" valign="top"><a id="acda4f577829f9d4ff58b9636903cbfe0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#acda4f577829f9d4ff58b9636903cbfe0">UART_INT_ON</a>()&#160;&#160;&#160;{ while(RCIF) clear = RC1REG; RCIE = 1; }</td></tr>
<tr class="memdesc:acda4f577829f9d4ff58b9636903cbfe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear transmission buffer and turn ON UART transmission interrupts. <br /></td></tr>
<tr class="separator:acda4f577829f9d4ff58b9636903cbfe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d26e5ca6078be961b6b42719ebca269"><td class="memItemLeft" align="right" valign="top"><a id="a4d26e5ca6078be961b6b42719ebca269"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a4d26e5ca6078be961b6b42719ebca269">LOG_ON</a>()&#160;&#160;&#160;{ <a class="el" href="charger__discharger_8h.html#a6d4067d47fba082577dc98dae5e53c48">log_on</a> = 1; }</td></tr>
<tr class="memdesc:a4d26e5ca6078be961b6b42719ebca269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn OFF logging in the terminal. <br /></td></tr>
<tr class="separator:a4d26e5ca6078be961b6b42719ebca269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f57a3156036b713dc852737da390252"><td class="memItemLeft" align="right" valign="top"><a id="a2f57a3156036b713dc852737da390252"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a2f57a3156036b713dc852737da390252">LOG_OFF</a>()&#160;&#160;&#160;{ <a class="el" href="charger__discharger_8h.html#a6d4067d47fba082577dc98dae5e53c48">log_on</a> = 0; }</td></tr>
<tr class="memdesc:a2f57a3156036b713dc852737da390252"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn ON logging in the terminal. <br /></td></tr>
<tr class="separator:a2f57a3156036b713dc852737da390252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59595b0c67a8bfb8dd65e914a18b83c7"><td class="memItemLeft" align="right" valign="top"><a id="a59595b0c67a8bfb8dd65e914a18b83c7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a59595b0c67a8bfb8dd65e914a18b83c7">RESET_TIME</a>()&#160;&#160;&#160;{ <a class="el" href="charger__discharger_8h.html#aa9bb52078cb5c647a0dfef243db183d6">minute</a> = 0; <a class="el" href="charger__discharger_8h.html#af03cfc6ea64c1cf48f35ae59730afad6">second</a> = -1; }</td></tr>
<tr class="memdesc:a59595b0c67a8bfb8dd65e914a18b83c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset timers. <br /></td></tr>
<tr class="separator:a59595b0c67a8bfb8dd65e914a18b83c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a998e4507851dde706a60a5b475eb27ca"><td class="memItemLeft" align="right" valign="top"><a id="a998e4507851dde706a60a5b475eb27ca"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a998e4507851dde706a60a5b475eb27ca">DC_MIN</a>&#160;&#160;&#160;50</td></tr>
<tr class="memdesc:a998e4507851dde706a60a5b475eb27ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum possible duty cycle, set around <b>0.1</b>. <br /></td></tr>
<tr class="separator:a998e4507851dde706a60a5b475eb27ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a701d2222601b84faafa94cb1909df104"><td class="memItemLeft" align="right" valign="top"><a id="a701d2222601b84faafa94cb1909df104"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a701d2222601b84faafa94cb1909df104">DC_MAX</a>&#160;&#160;&#160;409</td></tr>
<tr class="memdesc:a701d2222601b84faafa94cb1909df104"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum possible duty cycle, set around <b>0.8</b>. <br /></td></tr>
<tr class="separator:a701d2222601b84faafa94cb1909df104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7194053a42881b1b4bc8546b4c8713e9"><td class="memItemLeft" align="right" valign="top"><a id="a7194053a42881b1b4bc8546b4c8713e9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a7194053a42881b1b4bc8546b4c8713e9">COUNTER</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:a7194053a42881b1b4bc8546b4c8713e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter value, needed to obtained one second between counts. <br /></td></tr>
<tr class="separator:a7194053a42881b1b4bc8546b4c8713e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07e4b1149c8a3d5d22e1d62cf1ac21a8"><td class="memItemLeft" align="right" valign="top"><a id="a07e4b1149c8a3d5d22e1d62cf1ac21a8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a07e4b1149c8a3d5d22e1d62cf1ac21a8">CC_kp</a>&#160;&#160;&#160;25</td></tr>
<tr class="memdesc:a07e4b1149c8a3d5d22e1d62cf1ac21a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proportional constant divider for CC mode. <br /></td></tr>
<tr class="separator:a07e4b1149c8a3d5d22e1d62cf1ac21a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82116df58bb08a3ea67109a434b9bd25"><td class="memItemLeft" align="right" valign="top"><a id="a82116df58bb08a3ea67109a434b9bd25"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a82116df58bb08a3ea67109a434b9bd25">CC_ki</a>&#160;&#160;&#160;35</td></tr>
<tr class="memdesc:a82116df58bb08a3ea67109a434b9bd25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integral constant divider for CC mode. <br /></td></tr>
<tr class="separator:a82116df58bb08a3ea67109a434b9bd25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31ae8362bae13f23cc6b521a7499a5ee"><td class="memItemLeft" align="right" valign="top"><a id="a31ae8362bae13f23cc6b521a7499a5ee"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a31ae8362bae13f23cc6b521a7499a5ee">CV_kp</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:a31ae8362bae13f23cc6b521a7499a5ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proportional constant divider for CV mode. <br /></td></tr>
<tr class="separator:a31ae8362bae13f23cc6b521a7499a5ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57181200f8247c552f8d9751003d77c6"><td class="memItemLeft" align="right" valign="top"><a id="a57181200f8247c552f8d9751003d77c6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a57181200f8247c552f8d9751003d77c6">CV_ki</a>&#160;&#160;&#160;400</td></tr>
<tr class="memdesc:a57181200f8247c552f8d9751003d77c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integral constant divider for CV mode. <br /></td></tr>
<tr class="separator:a57181200f8247c552f8d9751003d77c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0597ae89918183de03119186d8995e75"><td class="memItemLeft" align="right" valign="top"><a id="a0597ae89918183de03119186d8995e75"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a0597ae89918183de03119186d8995e75">LINEBREAK</a>&#160;&#160;&#160;{ <a class="el" href="charger__discharger_8h.html#abf92d1a230db7234bdf5119716a0cf5f">UART_send_char</a>(10); <a class="el" href="charger__discharger_8h.html#abf92d1a230db7234bdf5119716a0cf5f">UART_send_char</a>(13); }</td></tr>
<tr class="memdesc:a0597ae89918183de03119186d8995e75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a linebreak to the terminal ///////////////////////Chemistry definition///////////////////////////////////////. <br /></td></tr>
<tr class="separator:a0597ae89918183de03119186d8995e75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a6dfc4597c4f82e81b47ca06486504"><td class="memItemLeft" align="right" valign="top"><a id="a28a6dfc4597c4f82e81b47ca06486504"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a28a6dfc4597c4f82e81b47ca06486504">LI_ION_CHEM</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a28a6dfc4597c4f82e81b47ca06486504"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set this definition to 1 and NI_MH_CHEM to 0 to set the test Li-Ion cells. <br /></td></tr>
<tr class="separator:a28a6dfc4597c4f82e81b47ca06486504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80362a7f4e241d7fd6bcc19d5f21ffd7"><td class="memItemLeft" align="right" valign="top"><a id="a80362a7f4e241d7fd6bcc19d5f21ffd7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a80362a7f4e241d7fd6bcc19d5f21ffd7">NI_MH_CHEM</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a80362a7f4e241d7fd6bcc19d5f21ffd7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set this definition to 1 and LI_ION_CHEM to 0 to set the test Ni-MH cells. <br /></td></tr>
<tr class="separator:a80362a7f4e241d7fd6bcc19d5f21ffd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7676cdfa371dfdcf6fb0687737c29a6"><td class="memItemLeft" align="right" valign="top"><a id="ae7676cdfa371dfdcf6fb0687737c29a6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ae7676cdfa371dfdcf6fb0687737c29a6">WAIT_TIME</a>&#160;&#160;&#160;600</td></tr>
<tr class="memdesc:ae7676cdfa371dfdcf6fb0687737c29a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time to wait before states, set to 10 minutes. <br /></td></tr>
<tr class="separator:ae7676cdfa371dfdcf6fb0687737c29a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2683ee4bd7cd9cdab8006368da6df09"><td class="memItemLeft" align="right" valign="top"><a id="aa2683ee4bd7cd9cdab8006368da6df09"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa2683ee4bd7cd9cdab8006368da6df09">DC_RES_SECS</a>&#160;&#160;&#160;14</td></tr>
<tr class="memdesc:aa2683ee4bd7cd9cdab8006368da6df09"><td class="mdescLeft">&#160;</td><td class="mdescRight">How many seconds the DC resistance process takes. <br /></td></tr>
<tr class="separator:aa2683ee4bd7cd9cdab8006368da6df09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d26458814361e1cf732df92f7dbc2d9"><td class="memItemLeft" align="right" valign="top"><a id="a5d26458814361e1cf732df92f7dbc2d9"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a5d26458814361e1cf732df92f7dbc2d9">Li_Ion_CV</a>&#160;&#160;&#160;4200</td></tr>
<tr class="memdesc:a5d26458814361e1cf732df92f7dbc2d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Li-Ion constant voltage setting in mV. <br /></td></tr>
<tr class="separator:a5d26458814361e1cf732df92f7dbc2d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb28139964ea13e391208ea07372cace"><td class="memItemLeft" align="right" valign="top"><a id="adb28139964ea13e391208ea07372cace"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#adb28139964ea13e391208ea07372cace">Li_Ion_CAP</a>&#160;&#160;&#160;3250</td></tr>
<tr class="memdesc:adb28139964ea13e391208ea07372cace"><td class="mdescLeft">&#160;</td><td class="mdescRight">Li-Ion capacity setting in mAh. <br /></td></tr>
<tr class="separator:adb28139964ea13e391208ea07372cace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a613a15ecc1a8e85198d8c93ce546fcf6"><td class="memItemLeft" align="right" valign="top"><a id="a613a15ecc1a8e85198d8c93ce546fcf6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a613a15ecc1a8e85198d8c93ce546fcf6">Li_Ion_EOC_I</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:a613a15ecc1a8e85198d8c93ce546fcf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Li-Ion end-of-charge current in mA. <br /></td></tr>
<tr class="separator:a613a15ecc1a8e85198d8c93ce546fcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b5d74511caec60eedfdfbf9fe71ce94"><td class="memItemLeft" align="right" valign="top"><a id="a5b5d74511caec60eedfdfbf9fe71ce94"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a5b5d74511caec60eedfdfbf9fe71ce94">Li_Ion_EOD_V</a>&#160;&#160;&#160;3000</td></tr>
<tr class="memdesc:a5b5d74511caec60eedfdfbf9fe71ce94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Li_Ion end-of-discharge voltage in mV. <br /></td></tr>
<tr class="separator:a5b5d74511caec60eedfdfbf9fe71ce94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8b7523ae7285838d22d268d244e3e41"><td class="memItemLeft" align="right" valign="top"><a id="ac8b7523ae7285838d22d268d244e3e41"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ac8b7523ae7285838d22d268d244e3e41">Ni_MH_CV</a>&#160;&#160;&#160;1750</td></tr>
<tr class="memdesc:ac8b7523ae7285838d22d268d244e3e41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ni-MH constant voltage setting in mV. <br /></td></tr>
<tr class="separator:ac8b7523ae7285838d22d268d244e3e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94e2a4926de4ad984b884e1ea882f06a"><td class="memItemLeft" align="right" valign="top"><a id="a94e2a4926de4ad984b884e1ea882f06a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a94e2a4926de4ad984b884e1ea882f06a">Ni_MH_CAP</a>&#160;&#160;&#160;2000</td></tr>
<tr class="memdesc:a94e2a4926de4ad984b884e1ea882f06a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ni-MH capacity setting in mAh. <br /></td></tr>
<tr class="separator:a94e2a4926de4ad984b884e1ea882f06a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0f8da57c2fb3c5701f9d5fe4685bcd8"><td class="memItemLeft" align="right" valign="top"><a id="ae0f8da57c2fb3c5701f9d5fe4685bcd8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ae0f8da57c2fb3c5701f9d5fe4685bcd8">Ni_MH_EOC_DV</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:ae0f8da57c2fb3c5701f9d5fe4685bcd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ni-MH end-fo-charge voltage drop in mV. <br /></td></tr>
<tr class="separator:ae0f8da57c2fb3c5701f9d5fe4685bcd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42b65399d5bd123d6001f5a0cf3353e1"><td class="memItemLeft" align="right" valign="top"><a id="a42b65399d5bd123d6001f5a0cf3353e1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a42b65399d5bd123d6001f5a0cf3353e1">Ni_MH_EOD_V</a>&#160;&#160;&#160;1000</td></tr>
<tr class="memdesc:a42b65399d5bd123d6001f5a0cf3353e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ni-MH end-of-discharge voltage in mV. <br /></td></tr>
<tr class="separator:a42b65399d5bd123d6001f5a0cf3353e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa19be6305a5a4485e1e70de70ed7d677"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a> { <br />
&#160;&#160;<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6">STANDBY</a> = 0, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677afd6a0e4343048b10646dd2976cc5ad18">IDLE</a> = 1, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ab7f3a434cd7c576917ad58613673c571">FAULT</a> = 2, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2df4f4d04ec310a30dd8eaac64f883a2">ISDONE</a> = 3, 
<br />
&#160;&#160;<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a79a322ccb4b29b85b3cab52dbccefd17">WAIT</a> = 4, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a95c89aa15e7cbe4ca2a03d955a4b067c">PREDISCHARGE</a> = 5, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677aea7debd6c1f7cf2d27b8774acac4109f">CHARGE</a> = 6, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677adfece03792e81dc232ae4f15fee2a423">DISCHARGE</a> = 7, 
<br />
&#160;&#160;<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a90827714b4165a402681b4ce4874e5f0">POSTCHARGE</a> = 8, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a5d64f3582250fabf9443c93ca77ecf9c">DS_DC_res</a> = 9, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a031d03f2aee61a88f34151e0b532df5b">CS_DC_res</a> = 10, 
<a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a68bd1d9b6b5d032caefff13585f9d22b">PS_DC_res</a> = 11
<br />
 }</td></tr>
<tr class="separator:aa19be6305a5a4485e1e70de70ed7d677"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a617e0199133fdef0d3a3e6a4a4c39c7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a617e0199133fdef0d3a3e6a4a4c39c7e">fSTANDBY</a> (void)</td></tr>
<tr class="memdesc:a617e0199133fdef0d3a3e6a4a4c39c7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function define the <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6" title="&quot;Stand by&quot; state, defined by function fSTANDBY()">STANDBY</a> state of the state machine.  <a href="#a617e0199133fdef0d3a3e6a4a4c39c7e">More...</a><br /></td></tr>
<tr class="separator:a617e0199133fdef0d3a3e6a4a4c39c7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af14972c8bcddf306a0cc7f7f43a5e3c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#af14972c8bcddf306a0cc7f7f43a5e3c1">fIDLE</a> (void)</td></tr>
<tr class="memdesc:af14972c8bcddf306a0cc7f7f43a5e3c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function define the IDLE state of the state machine.  <a href="#af14972c8bcddf306a0cc7f7f43a5e3c1">More...</a><br /></td></tr>
<tr class="separator:af14972c8bcddf306a0cc7f7f43a5e3c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c4e2b572b4dd0ba38a90c7721edf3d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a0c4e2b572b4dd0ba38a90c7721edf3d8">fCHARGE</a> (void)</td></tr>
<tr class="memdesc:a0c4e2b572b4dd0ba38a90c7721edf3d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function define the IDLE state of the state machine.  <a href="#a0c4e2b572b4dd0ba38a90c7721edf3d8">More...</a><br /></td></tr>
<tr class="separator:a0c4e2b572b4dd0ba38a90c7721edf3d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad25aed7556b1faba14a86a62f1dd4f89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ad25aed7556b1faba14a86a62f1dd4f89">fDISCHARGE</a> (void)</td></tr>
<tr class="memdesc:ad25aed7556b1faba14a86a62f1dd4f89"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function define the IDLE state of the state machine.  <a href="#ad25aed7556b1faba14a86a62f1dd4f89">More...</a><br /></td></tr>
<tr class="separator:ad25aed7556b1faba14a86a62f1dd4f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b36b83531f2626d071ba3d1115ba83f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a0b36b83531f2626d071ba3d1115ba83f">fDC_res</a> (void)</td></tr>
<tr class="memdesc:a0b36b83531f2626d071ba3d1115ba83f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function define the IDLE state of the state machine.  <a href="#a0b36b83531f2626d071ba3d1115ba83f">More...</a><br /></td></tr>
<tr class="separator:a0b36b83531f2626d071ba3d1115ba83f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a621fb7a48066389e0889ad9f7413f6c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a621fb7a48066389e0889ad9f7413f6c9">fWAIT</a> (void)</td></tr>
<tr class="memdesc:a621fb7a48066389e0889ad9f7413f6c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function define the IDLE state of the state machine.  <a href="#a621fb7a48066389e0889ad9f7413f6c9">More...</a><br /></td></tr>
<tr class="separator:a621fb7a48066389e0889ad9f7413f6c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f57fe99a95d5951b37346f2e592a033"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a6f57fe99a95d5951b37346f2e592a033">fISDONE</a> (void)</td></tr>
<tr class="memdesc:a6f57fe99a95d5951b37346f2e592a033"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is executed every time a whole test process for one cell is finished.  <a href="#a6f57fe99a95d5951b37346f2e592a033">More...</a><br /></td></tr>
<tr class="separator:a6f57fe99a95d5951b37346f2e592a033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa309f5ae96bb5d30d1097731fc373f1f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa309f5ae96bb5d30d1097731fc373f1f">fFAULT</a> (void)</td></tr>
<tr class="memdesc:aa309f5ae96bb5d30d1097731fc373f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function define the FAULT state of the state machine.  <a href="#aa309f5ae96bb5d30d1097731fc373f1f">More...</a><br /></td></tr>
<tr class="separator:aa309f5ae96bb5d30d1097731fc373f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa37d23c2482420861e3f4580cfbbdb2a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa37d23c2482420861e3f4580cfbbdb2a">start_state_machine</a> (void)</td></tr>
<tr class="memdesc:aa37d23c2482420861e3f4580cfbbdb2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to start the state machine.  <a href="#aa37d23c2482420861e3f4580cfbbdb2a">More...</a><br /></td></tr>
<tr class="separator:aa37d23c2482420861e3f4580cfbbdb2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b7665498c6c3419b3a6d53d4d2e25d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a5b7665498c6c3419b3a6d53d4d2e25d9">state_machine</a> (void)</td></tr>
<tr class="memdesc:a5b7665498c6c3419b3a6d53d4d2e25d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function contain the transition definition for the states of the machine.  <a href="#a5b7665498c6c3419b3a6d53d4d2e25d9">More...</a><br /></td></tr>
<tr class="separator:a5b7665498c6c3419b3a6d53d4d2e25d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac441c35a0d7d01f983d6b3414944d62a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ac441c35a0d7d01f983d6b3414944d62a">param</a> (void)</td></tr>
<tr class="memdesc:ac441c35a0d7d01f983d6b3414944d62a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to define the parameters of the testing process for both chemistries.  <a href="#ac441c35a0d7d01f983d6b3414944d62a">More...</a><br /></td></tr>
<tr class="separator:ac441c35a0d7d01f983d6b3414944d62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a116216d02b45c1207161f503bf20adbc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a116216d02b45c1207161f503bf20adbc">converter_settings</a> (void)</td></tr>
<tr class="memdesc:a116216d02b45c1207161f503bf20adbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to set the configurations of the converter.  <a href="#a116216d02b45c1207161f503bf20adbc">More...</a><br /></td></tr>
<tr class="separator:a116216d02b45c1207161f503bf20adbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9efe22aaead3a5e936b5df459de02eba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a9efe22aaead3a5e936b5df459de02eba">initialize</a> (void)</td></tr>
<tr class="memdesc:a9efe22aaead3a5e936b5df459de02eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to initialize all the PIC16F1787 registers.  <a href="#a9efe22aaead3a5e936b5df459de02eba">More...</a><br /></td></tr>
<tr class="separator:a9efe22aaead3a5e936b5df459de02eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a5face47787c24a8922e3a5b4274ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ac0a5face47787c24a8922e3a5b4274ee">pid</a> (uint16_t feedback, uint16_t setpoint)</td></tr>
<tr class="memdesc:ac0a5face47787c24a8922e3a5b4274ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function defines the PI controller.  <a href="#ac0a5face47787c24a8922e3a5b4274ee">More...</a><br /></td></tr>
<tr class="separator:ac0a5face47787c24a8922e3a5b4274ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f3630c962d9bcafd71e4c4a03547c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a93f3630c962d9bcafd71e4c4a03547c1">set_DC</a> (void)</td></tr>
<tr class="memdesc:a93f3630c962d9bcafd71e4c4a03547c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets the desired duty cycle of the PWM.  <a href="#a93f3630c962d9bcafd71e4c4a03547c1">More...</a><br /></td></tr>
<tr class="separator:a93f3630c962d9bcafd71e4c4a03547c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf70b9e763a525b6113c0349583e7ac0"><td class="memItemLeft" align="right" valign="top"><a id="abf70b9e763a525b6113c0349583e7ac0"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#abf70b9e763a525b6113c0349583e7ac0">read_ADC</a> (uint16_t channel)</td></tr>
<tr class="memdesc:abf70b9e763a525b6113c0349583e7ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function read the ADC and store the data in the coresponding variable. <br /></td></tr>
<tr class="separator:abf70b9e763a525b6113c0349583e7ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8eda4a7f25b80578a7cee00f6c9b6e4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a8eda4a7f25b80578a7cee00f6c9b6e4a">scaling</a> (void)</td></tr>
<tr class="memdesc:a8eda4a7f25b80578a7cee00f6c9b6e4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes care of scaling the average values to correspond with their real values.  <a href="#a8eda4a7f25b80578a7cee00f6c9b6e4a">More...</a><br /></td></tr>
<tr class="separator:a8eda4a7f25b80578a7cee00f6c9b6e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b8b498532d1d667c624601a3cf715bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a0b8b498532d1d667c624601a3cf715bc">log_control</a> (void)</td></tr>
<tr class="memdesc:a0b8b498532d1d667c624601a3cf715bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function takes care of calculating the average values printing the log data using the UART.  <a href="#a0b8b498532d1d667c624601a3cf715bc">More...</a><br /></td></tr>
<tr class="separator:a0b8b498532d1d667c624601a3cf715bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92a0c0757e4254434d1526372af3113d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a92a0c0757e4254434d1526372af3113d">display_value_u</a> (uint16_t value)</td></tr>
<tr class="memdesc:a92a0c0757e4254434d1526372af3113d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function convert a number to string and then send it using UART.  <a href="#a92a0c0757e4254434d1526372af3113d">More...</a><br /></td></tr>
<tr class="separator:a92a0c0757e4254434d1526372af3113d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fcc321fc8a8e5fb1c8aeeae5da8daf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a9fcc321fc8a8e5fb1c8aeeae5da8daf1">display_value_s</a> (int16_t value)</td></tr>
<tr class="memdesc:a9fcc321fc8a8e5fb1c8aeeae5da8daf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function convert a number to string and then send it using UART.  <a href="#a9fcc321fc8a8e5fb1c8aeeae5da8daf1">More...</a><br /></td></tr>
<tr class="separator:a9fcc321fc8a8e5fb1c8aeeae5da8daf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db67160f1d6e9368e8c07df1c904eb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a1db67160f1d6e9368e8c07df1c904eb4">cc_cv_mode</a> (uint16_t current_voltage, uint16_t reference_voltage, bool CC_mode_status)</td></tr>
<tr class="memdesc:a1db67160f1d6e9368e8c07df1c904eb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function switches between CC and CV mode.  <a href="#a1db67160f1d6e9368e8c07df1c904eb4">More...</a><br /></td></tr>
<tr class="separator:a1db67160f1d6e9368e8c07df1c904eb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f05187afaedd0cd35e9137eaf557ef8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a4f05187afaedd0cd35e9137eaf557ef8">control_loop</a> (void)</td></tr>
<tr class="memdesc:a4f05187afaedd0cd35e9137eaf557ef8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calls the PI control loop for current or voltage depending on the value of the <a class="el" href="charger__discharger_8h.html#ad4bb67368b5b95e33bae6d43ef3174a8" title="CC / CV selector. CC:  cmode = 1 . CV:  cmode = 0">cmode</a> variable.  <a href="#a4f05187afaedd0cd35e9137eaf557ef8">More...</a><br /></td></tr>
<tr class="separator:a4f05187afaedd0cd35e9137eaf557ef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2f580a1d85442504950b07e3c8f1145"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ab2f580a1d85442504950b07e3c8f1145">calculate_avg</a> (void)</td></tr>
<tr class="memdesc:ab2f580a1d85442504950b07e3c8f1145"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function calculate the averages.  <a href="#ab2f580a1d85442504950b07e3c8f1145">More...</a><br /></td></tr>
<tr class="separator:ab2f580a1d85442504950b07e3c8f1145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a5aa8b76d80abb2edcde7be747f4370"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a7a5aa8b76d80abb2edcde7be747f4370">interrupt_enable</a> (void)</td></tr>
<tr class="memdesc:a7a5aa8b76d80abb2edcde7be747f4370"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function activate the UART reception interruption.  <a href="#a7a5aa8b76d80abb2edcde7be747f4370">More...</a><br /></td></tr>
<tr class="separator:a7a5aa8b76d80abb2edcde7be747f4370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf92d1a230db7234bdf5119716a0cf5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#abf92d1a230db7234bdf5119716a0cf5f">UART_send_char</a> (char bt)</td></tr>
<tr class="memdesc:abf92d1a230db7234bdf5119716a0cf5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function send one byte of data to UART.  <a href="#abf92d1a230db7234bdf5119716a0cf5f">More...</a><br /></td></tr>
<tr class="separator:abf92d1a230db7234bdf5119716a0cf5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae033bb8a9289af391aef3cc3bd57a0e9"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ae033bb8a9289af391aef3cc3bd57a0e9">UART_get_char</a> (void)</td></tr>
<tr class="memdesc:ae033bb8a9289af391aef3cc3bd57a0e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function receive one byte of data from UART.  <a href="#ae033bb8a9289af391aef3cc3bd57a0e9">More...</a><br /></td></tr>
<tr class="separator:ae033bb8a9289af391aef3cc3bd57a0e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac27ccd7f2eb1f5e96bb091338acc1e7f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ac27ccd7f2eb1f5e96bb091338acc1e7f">UART_send_string</a> (char *st_pt)</td></tr>
<tr class="memdesc:ac27ccd7f2eb1f5e96bb091338acc1e7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function send a string using UART.  <a href="#ac27ccd7f2eb1f5e96bb091338acc1e7f">More...</a><br /></td></tr>
<tr class="separator:ac27ccd7f2eb1f5e96bb091338acc1e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4126a9c7eed2c3658428ce1613f62848"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a4126a9c7eed2c3658428ce1613f62848">temp_protection</a> (void)</td></tr>
<tr class="separator:a4126a9c7eed2c3658428ce1613f62848"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75740b5600396316399a5608fe2cb4d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a75740b5600396316399a5608fe2cb4d3">Cell_ON</a> (void)</td></tr>
<tr class="memdesc:a75740b5600396316399a5608fe2cb4d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function activate the desired relay in the switcher board according to the value of <a class="el" href="charger__discharger_8h.html#a2f582152bcd11169abaab8dfb2e0ae2a" title="Cell counter from &#39;1&#39; to &#39;4&#39;. Initialized as &#39;1&#39;.">cell_count</a>.  <a href="#a75740b5600396316399a5608fe2cb4d3">More...</a><br /></td></tr>
<tr class="separator:a75740b5600396316399a5608fe2cb4d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bbc85db8cf08142e0984d07b97e722b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a5bbc85db8cf08142e0984d07b97e722b">Cell_OFF</a> (void)</td></tr>
<tr class="memdesc:a5bbc85db8cf08142e0984d07b97e722b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function deactivate all relays in the switcher board.  <a href="#a5bbc85db8cf08142e0984d07b97e722b">More...</a><br /></td></tr>
<tr class="separator:a5bbc85db8cf08142e0984d07b97e722b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a34e3f615b83a0c9d721b76899b2a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ad2a34e3f615b83a0c9d721b76899b2a4">timing</a> (void)</td></tr>
<tr class="memdesc:ad2a34e3f615b83a0c9d721b76899b2a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function control the timing.  <a href="#ad2a34e3f615b83a0c9d721b76899b2a4">More...</a><br /></td></tr>
<tr class="separator:ad2a34e3f615b83a0c9d721b76899b2a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a29f21565ea58c567076a7677b0cec206"><td class="memItemLeft" align="right" valign="top"><a id="a29f21565ea58c567076a7677b0cec206"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a29f21565ea58c567076a7677b0cec206">SECF</a> = 1</td></tr>
<tr class="memdesc:a29f21565ea58c567076a7677b0cec206"><td class="mdescLeft">&#160;</td><td class="mdescRight">1 second flag <br /></td></tr>
<tr class="separator:a29f21565ea58c567076a7677b0cec206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa138b263667688f0a28af01c14f90f8a"><td class="memItemLeft" align="right" valign="top"><a id="aa138b263667688f0a28af01c14f90f8a"></a>
unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa138b263667688f0a28af01c14f90f8a">option</a> = 0</td></tr>
<tr class="memdesc:aa138b263667688f0a28af01c14f90f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Four different options, look into <a class="el" href="charger__discharger_8h.html#ac441c35a0d7d01f983d6b3414944d62a">param()</a> for details. <br /></td></tr>
<tr class="separator:aa138b263667688f0a28af01c14f90f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6be948a502bdacee3d2a2cc1d2f97ece"><td class="memItemLeft" align="right" valign="top"><a id="a6be948a502bdacee3d2a2cc1d2f97ece"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a6be948a502bdacee3d2a2cc1d2f97ece">capacity</a></td></tr>
<tr class="memdesc:a6be948a502bdacee3d2a2cc1d2f97ece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Definition of capacity per cell according to each chemistry. <br /></td></tr>
<tr class="separator:a6be948a502bdacee3d2a2cc1d2f97ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38a978425fed5c90cc54372956b304dd"><td class="memItemLeft" align="right" valign="top"><a id="a38a978425fed5c90cc54372956b304dd"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a38a978425fed5c90cc54372956b304dd">i_char</a></td></tr>
<tr class="memdesc:a38a978425fed5c90cc54372956b304dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Charging current in mA. <br /></td></tr>
<tr class="separator:a38a978425fed5c90cc54372956b304dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8695876e1624c29ba67082bea20b2c83"><td class="memItemLeft" align="right" valign="top"><a id="a8695876e1624c29ba67082bea20b2c83"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a8695876e1624c29ba67082bea20b2c83">i_disc</a></td></tr>
<tr class="memdesc:a8695876e1624c29ba67082bea20b2c83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discharging current in mA. <br /></td></tr>
<tr class="separator:a8695876e1624c29ba67082bea20b2c83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f582152bcd11169abaab8dfb2e0ae2a"><td class="memItemLeft" align="right" valign="top"><a id="a2f582152bcd11169abaab8dfb2e0ae2a"></a>
unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a2f582152bcd11169abaab8dfb2e0ae2a">cell_count</a> = 49</td></tr>
<tr class="memdesc:a2f582152bcd11169abaab8dfb2e0ae2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cell counter from '1' to '4'. Initialized as '1'. <br /></td></tr>
<tr class="separator:a2f582152bcd11169abaab8dfb2e0ae2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00fd8f059b9286917da9abe7e3561aaa"><td class="memItemLeft" align="right" valign="top"><a id="a00fd8f059b9286917da9abe7e3561aaa"></a>
unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a00fd8f059b9286917da9abe7e3561aaa">cell_max</a> = 0</td></tr>
<tr class="memdesc:a00fd8f059b9286917da9abe7e3561aaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of cells to be tested. Initialized as 0. <br /></td></tr>
<tr class="separator:a00fd8f059b9286917da9abe7e3561aaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0761a8f74c3606c287684200b561b807"><td class="memItemLeft" align="right" valign="top"><a id="a0761a8f74c3606c287684200b561b807"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a0761a8f74c3606c287684200b561b807">wait_count</a> = 0</td></tr>
<tr class="memdesc:a0761a8f74c3606c287684200b561b807"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for waiting time between states. Initialized as 0. <br /></td></tr>
<tr class="separator:a0761a8f74c3606c287684200b561b807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0cf1e21feceacf62d2ea6af8bc03fe9"><td class="memItemLeft" align="right" valign="top"><a id="aa0cf1e21feceacf62d2ea6af8bc03fe9"></a>
unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa0cf1e21feceacf62d2ea6af8bc03fe9">dc_res_count</a> = 0</td></tr>
<tr class="memdesc:aa0cf1e21feceacf62d2ea6af8bc03fe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter for DC resistance. Initialized as 0. <br /></td></tr>
<tr class="separator:aa0cf1e21feceacf62d2ea6af8bc03fe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab12828525693568ae9c217805bea1ef9"><td class="memItemLeft" align="right" valign="top"><a id="ab12828525693568ae9c217805bea1ef9"></a>
unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ab12828525693568ae9c217805bea1ef9">state</a> = <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6">STANDBY</a></td></tr>
<tr class="memdesc:ab12828525693568ae9c217805bea1ef9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used with store the value of the <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a> enum. Initialized as <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6">STANDBY</a>. <br /></td></tr>
<tr class="separator:ab12828525693568ae9c217805bea1ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad24a7209740a83b880691380fbe8e0e9"><td class="memItemLeft" align="right" valign="top"><a id="ad24a7209740a83b880691380fbe8e0e9"></a>
unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ad24a7209740a83b880691380fbe8e0e9">prev_state</a> = <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6">STANDBY</a></td></tr>
<tr class="memdesc:ad24a7209740a83b880691380fbe8e0e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to store the previous state. Initialized as <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6">STANDBY</a>. <br /></td></tr>
<tr class="separator:ad24a7209740a83b880691380fbe8e0e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a065f3720f88ca40161383dfcbb3e0616"><td class="memItemLeft" align="right" valign="top"><a id="a065f3720f88ca40161383dfcbb3e0616"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a065f3720f88ca40161383dfcbb3e0616">EOC_current</a></td></tr>
<tr class="memdesc:a065f3720f88ca40161383dfcbb3e0616"><td class="mdescLeft">&#160;</td><td class="mdescRight">End-of-charge current in mA. <br /></td></tr>
<tr class="separator:a065f3720f88ca40161383dfcbb3e0616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87c08f93220186401fc9530f98a8cff3"><td class="memItemLeft" align="right" valign="top"><a id="a87c08f93220186401fc9530f98a8cff3"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a87c08f93220186401fc9530f98a8cff3">EOD_voltage</a></td></tr>
<tr class="memdesc:a87c08f93220186401fc9530f98a8cff3"><td class="mdescLeft">&#160;</td><td class="mdescRight">End-of-dischage voltage in mV. <br /></td></tr>
<tr class="separator:a87c08f93220186401fc9530f98a8cff3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa8081309d0f0173b76fbf61b9da118f"><td class="memItemLeft" align="right" valign="top"><a id="aaa8081309d0f0173b76fbf61b9da118f"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aaa8081309d0f0173b76fbf61b9da118f">v_1_dcres</a></td></tr>
<tr class="memdesc:aaa8081309d0f0173b76fbf61b9da118f"><td class="mdescLeft">&#160;</td><td class="mdescRight">First voltage measured during DC resistance state. <br /></td></tr>
<tr class="separator:aaa8081309d0f0173b76fbf61b9da118f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a929a8aedc6d2bc11c053fca94c761728"><td class="memItemLeft" align="right" valign="top"><a id="a929a8aedc6d2bc11c053fca94c761728"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a929a8aedc6d2bc11c053fca94c761728">i_1_dcres</a></td></tr>
<tr class="memdesc:a929a8aedc6d2bc11c053fca94c761728"><td class="mdescLeft">&#160;</td><td class="mdescRight">First current measured during DC resistance state. <br /></td></tr>
<tr class="separator:a929a8aedc6d2bc11c053fca94c761728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae178b850b6f9a87b8ac12e8c3da0310"><td class="memItemLeft" align="right" valign="top"><a id="aae178b850b6f9a87b8ac12e8c3da0310"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aae178b850b6f9a87b8ac12e8c3da0310">v_2_dcres</a></td></tr>
<tr class="memdesc:aae178b850b6f9a87b8ac12e8c3da0310"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second voltage measured during DC resistance state. <br /></td></tr>
<tr class="separator:aae178b850b6f9a87b8ac12e8c3da0310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4489f85f12d38cbfedea76cf452608ab"><td class="memItemLeft" align="right" valign="top"><a id="a4489f85f12d38cbfedea76cf452608ab"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a4489f85f12d38cbfedea76cf452608ab">i_2_dcres</a></td></tr>
<tr class="memdesc:a4489f85f12d38cbfedea76cf452608ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Second current measured during DC resistance state. <br /></td></tr>
<tr class="separator:a4489f85f12d38cbfedea76cf452608ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429a778fd89f582bde7a41fdd461a823"><td class="memItemLeft" align="right" valign="top"><a id="a429a778fd89f582bde7a41fdd461a823"></a>
uint24_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a429a778fd89f582bde7a41fdd461a823">dc_res_val</a></td></tr>
<tr class="memdesc:a429a778fd89f582bde7a41fdd461a823"><td class="mdescLeft">&#160;</td><td class="mdescRight">To store the operation of obtained from the DC resistance state. <br /></td></tr>
<tr class="separator:a429a778fd89f582bde7a41fdd461a823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad08b23d03ea817ae428dd1cc1e1d8f1a"><td class="memItemLeft" align="right" valign="top"><a id="ad08b23d03ea817ae428dd1cc1e1d8f1a"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ad08b23d03ea817ae428dd1cc1e1d8f1a">conv</a> = 0</td></tr>
<tr class="memdesc:ad08b23d03ea817ae428dd1cc1e1d8f1a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn controller ON(1) or OFF(0). Initialized as 0. <br /></td></tr>
<tr class="separator:ad08b23d03ea817ae428dd1cc1e1d8f1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a39bfc7e1dc3b6f9c997c1c43fa996"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#af6a39bfc7e1dc3b6f9c997c1c43fa996">count</a> = <a class="el" href="charger__discharger_8h.html#a7194053a42881b1b4bc8546b4c8713e9">COUNTER</a></td></tr>
<tr class="memdesc:af6a39bfc7e1dc3b6f9c997c1c43fa996"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter that should be cleared every second. Initialized as <a class="el" href="charger__discharger_8h.html#a7194053a42881b1b4bc8546b4c8713e9" title="Counter value, needed to obtained one second between counts.">COUNTER</a>.  <a href="#af6a39bfc7e1dc3b6f9c997c1c43fa996">More...</a><br /></td></tr>
<tr class="separator:af6a39bfc7e1dc3b6f9c997c1c43fa996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f38113a34f9eab3e7782eade81d266"><td class="memItemLeft" align="right" valign="top"><a id="ac5f38113a34f9eab3e7782eade81d266"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ac5f38113a34f9eab3e7782eade81d266">v</a></td></tr>
<tr class="memdesc:ac5f38113a34f9eab3e7782eade81d266"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last voltage ADC measurement. <br /></td></tr>
<tr class="separator:ac5f38113a34f9eab3e7782eade81d266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78f7a37dba921e0b0347b960fb40bc51"><td class="memItemLeft" align="right" valign="top"><a id="a78f7a37dba921e0b0347b960fb40bc51"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a78f7a37dba921e0b0347b960fb40bc51">i</a></td></tr>
<tr class="memdesc:a78f7a37dba921e0b0347b960fb40bc51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last current ADC measurement. <br /></td></tr>
<tr class="separator:a78f7a37dba921e0b0347b960fb40bc51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3636f663c6b00463f1bad29dd9617997"><td class="memItemLeft" align="right" valign="top"><a id="a3636f663c6b00463f1bad29dd9617997"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a3636f663c6b00463f1bad29dd9617997">t</a></td></tr>
<tr class="memdesc:a3636f663c6b00463f1bad29dd9617997"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last temperature ADC measurement. <br /></td></tr>
<tr class="separator:a3636f663c6b00463f1bad29dd9617997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae132519ff35988efeb192e7a3c5b2168"><td class="memItemLeft" align="right" valign="top"><a id="ae132519ff35988efeb192e7a3c5b2168"></a>
uint24_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ae132519ff35988efeb192e7a3c5b2168">vacum</a> = 0</td></tr>
<tr class="memdesc:ae132519ff35988efeb192e7a3c5b2168"><td class="mdescLeft">&#160;</td><td class="mdescRight">accumulator dor v <br /></td></tr>
<tr class="separator:ae132519ff35988efeb192e7a3c5b2168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23970c800e711e68bd3b6bd3f9e27c32"><td class="memItemLeft" align="right" valign="top"><a id="a23970c800e711e68bd3b6bd3f9e27c32"></a>
uint24_t&#160;</td><td class="memItemRight" valign="bottom"><b>iacum</b> = 0</td></tr>
<tr class="separator:a23970c800e711e68bd3b6bd3f9e27c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea539df167218c3d11b57f85deef9cd6"><td class="memItemLeft" align="right" valign="top"><a id="aea539df167218c3d11b57f85deef9cd6"></a>
uint24_t&#160;</td><td class="memItemRight" valign="bottom"><b>tacum</b> = 0</td></tr>
<tr class="separator:aea539df167218c3d11b57f85deef9cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec6644dbb58ba751b340bd155b9e3cdc"><td class="memItemLeft" align="right" valign="top"><a id="aec6644dbb58ba751b340bd155b9e3cdc"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aec6644dbb58ba751b340bd155b9e3cdc">vavg</a> = 0</td></tr>
<tr class="memdesc:aec6644dbb58ba751b340bd155b9e3cdc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last one-second-average of <a class="el" href="charger__discharger_8h.html#ac5f38113a34f9eab3e7782eade81d266" title="Last voltage ADC measurement.">v</a> . Initialized as 0. <br /></td></tr>
<tr class="separator:aec6644dbb58ba751b340bd155b9e3cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0799e1bdc59344ad781f8ed52b3d9189"><td class="memItemLeft" align="right" valign="top"><a id="a0799e1bdc59344ad781f8ed52b3d9189"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a0799e1bdc59344ad781f8ed52b3d9189">iavg</a> = 0</td></tr>
<tr class="memdesc:a0799e1bdc59344ad781f8ed52b3d9189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last one-second-average of <a class="el" href="charger__discharger_8h.html#a78f7a37dba921e0b0347b960fb40bc51" title="Last current ADC measurement.">i</a> . Initialized as 0. <br /></td></tr>
<tr class="separator:a0799e1bdc59344ad781f8ed52b3d9189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d8afe51d9406df27f4388df51b61e38"><td class="memItemLeft" align="right" valign="top"><a id="a2d8afe51d9406df27f4388df51b61e38"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a2d8afe51d9406df27f4388df51b61e38">tavg</a> = 0</td></tr>
<tr class="memdesc:a2d8afe51d9406df27f4388df51b61e38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last one-second-average of <a class="el" href="charger__discharger_8h.html#a3636f663c6b00463f1bad29dd9617997" title="Last temperature ADC measurement.">t</a> . Initialized as 0. <br /></td></tr>
<tr class="separator:a2d8afe51d9406df27f4388df51b61e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26dd2ede681df7d784fa64efc10d350a"><td class="memItemLeft" align="right" valign="top"><a id="a26dd2ede681df7d784fa64efc10d350a"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a26dd2ede681df7d784fa64efc10d350a">qavg</a> = 0</td></tr>
<tr class="memdesc:a26dd2ede681df7d784fa64efc10d350a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integration of <a class="el" href="charger__discharger_8h.html#a78f7a37dba921e0b0347b960fb40bc51" title="Last current ADC measurement.">i</a> . Initialized as 0. <br /></td></tr>
<tr class="separator:a26dd2ede681df7d784fa64efc10d350a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45bd3ba8988708cb8dbf2d44220ba9f"><td class="memItemLeft" align="right" valign="top"><a id="aa45bd3ba8988708cb8dbf2d44220ba9f"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa45bd3ba8988708cb8dbf2d44220ba9f">vmax</a> = 0</td></tr>
<tr class="memdesc:aa45bd3ba8988708cb8dbf2d44220ba9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum recorded average voltage. <br /></td></tr>
<tr class="separator:aa45bd3ba8988708cb8dbf2d44220ba9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab083909f4f4cd7c27bff01f9865da8"><td class="memItemLeft" align="right" valign="top"><a id="a2ab083909f4f4cd7c27bff01f9865da8"></a>
int24_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a2ab083909f4f4cd7c27bff01f9865da8">intacum</a></td></tr>
<tr class="memdesc:a2ab083909f4f4cd7c27bff01f9865da8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integral acumulator of PI compensator. <br /></td></tr>
<tr class="separator:a2ab083909f4f4cd7c27bff01f9865da8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a289f8a95d80e630813bce16c8697695d"><td class="memItemLeft" align="right" valign="top"><a id="a289f8a95d80e630813bce16c8697695d"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a289f8a95d80e630813bce16c8697695d">kp</a></td></tr>
<tr class="memdesc:a289f8a95d80e630813bce16c8697695d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Proportional compesator gain. <br /></td></tr>
<tr class="separator:a289f8a95d80e630813bce16c8697695d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6856f49f60524dad9333c2a1d14a46e7"><td class="memItemLeft" align="right" valign="top"><a id="a6856f49f60524dad9333c2a1d14a46e7"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a6856f49f60524dad9333c2a1d14a46e7">ki</a></td></tr>
<tr class="memdesc:a6856f49f60524dad9333c2a1d14a46e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integral compesator gain. <br /></td></tr>
<tr class="separator:a6856f49f60524dad9333c2a1d14a46e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9677ac60c8e6bbdd674b48efcd82634e"><td class="memItemLeft" align="right" valign="top"><a id="a9677ac60c8e6bbdd674b48efcd82634e"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a9677ac60c8e6bbdd674b48efcd82634e">vref</a> = 0</td></tr>
<tr class="memdesc:a9677ac60c8e6bbdd674b48efcd82634e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scaled voltage setpoint. Initialized as 0. <br /></td></tr>
<tr class="separator:a9677ac60c8e6bbdd674b48efcd82634e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21e2c9f45f390294b009977a3f883f43"><td class="memItemLeft" align="right" valign="top"><a id="a21e2c9f45f390294b009977a3f883f43"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a21e2c9f45f390294b009977a3f883f43">cvref</a> = 0</td></tr>
<tr class="memdesc:a21e2c9f45f390294b009977a3f883f43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unscaled voltage setpoint. Initialized as 0. <br /></td></tr>
<tr class="separator:a21e2c9f45f390294b009977a3f883f43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18614df5d72e38b0006c070dcd4f8d86"><td class="memItemLeft" align="right" valign="top"><a id="a18614df5d72e38b0006c070dcd4f8d86"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a18614df5d72e38b0006c070dcd4f8d86">iref</a> = 0</td></tr>
<tr class="memdesc:a18614df5d72e38b0006c070dcd4f8d86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current setpoint. Initialized as 0. <br /></td></tr>
<tr class="separator:a18614df5d72e38b0006c070dcd4f8d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0dfa025bc5d81099bade232bbce4c40"><td class="memItemLeft" align="right" valign="top"><a id="af0dfa025bc5d81099bade232bbce4c40"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#af0dfa025bc5d81099bade232bbce4c40">ccref</a> = 0</td></tr>
<tr class="memdesc:af0dfa025bc5d81099bade232bbce4c40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unscaled voltage setpoint. Initialized as 0. <br /></td></tr>
<tr class="separator:af0dfa025bc5d81099bade232bbce4c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4bb67368b5b95e33bae6d43ef3174a8"><td class="memItemLeft" align="right" valign="top"><a id="ad4bb67368b5b95e33bae6d43ef3174a8"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#ad4bb67368b5b95e33bae6d43ef3174a8">cmode</a> = 1</td></tr>
<tr class="memdesc:ad4bb67368b5b95e33bae6d43ef3174a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">CC / CV selector. CC: <code> cmode = 1 </code>. CV: <code> cmode = 0 </code> <br /></td></tr>
<tr class="separator:ad4bb67368b5b95e33bae6d43ef3174a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb07fc3f35b1ac3f277f3c4b80ce2269"><td class="memItemLeft" align="right" valign="top"><a id="adb07fc3f35b1ac3f277f3c4b80ce2269"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#adb07fc3f35b1ac3f277f3c4b80ce2269">dc</a> = 0</td></tr>
<tr class="memdesc:adb07fc3f35b1ac3f277f3c4b80ce2269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duty cycle. <br /></td></tr>
<tr class="separator:adb07fc3f35b1ac3f277f3c4b80ce2269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d4067d47fba082577dc98dae5e53c48"><td class="memItemLeft" align="right" valign="top"><a id="a6d4067d47fba082577dc98dae5e53c48"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#a6d4067d47fba082577dc98dae5e53c48">log_on</a> = 0</td></tr>
<tr class="memdesc:a6d4067d47fba082577dc98dae5e53c48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Variable to indicate if the log is activated. <br /></td></tr>
<tr class="separator:a6d4067d47fba082577dc98dae5e53c48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03cfc6ea64c1cf48f35ae59730afad6"><td class="memItemLeft" align="right" valign="top"><a id="af03cfc6ea64c1cf48f35ae59730afad6"></a>
int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#af03cfc6ea64c1cf48f35ae59730afad6">second</a> = 0</td></tr>
<tr class="memdesc:af03cfc6ea64c1cf48f35ae59730afad6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seconds counter, resetted after 59 seconds. <br /></td></tr>
<tr class="separator:af03cfc6ea64c1cf48f35ae59730afad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9bb52078cb5c647a0dfef243db183d6"><td class="memItemLeft" align="right" valign="top"><a id="aa9bb52078cb5c647a0dfef243db183d6"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="charger__discharger_8h.html#aa9bb52078cb5c647a0dfef243db183d6">minute</a> = 0</td></tr>
<tr class="memdesc:aa9bb52078cb5c647a0dfef243db183d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minutes counter, only manually reset. <br /></td></tr>
<tr class="separator:aa9bb52078cb5c647a0dfef243db183d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f1ad43d3bf79b40bc39dbb5a6c3a5ae"><td class="memItemLeft" align="right" valign="top"><a id="a7f1ad43d3bf79b40bc39dbb5a6c3a5ae"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>timeout</b> = 0</td></tr>
<tr class="separator:a7f1ad43d3bf79b40bc39dbb5a6c3a5ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43e0a97c0d8ad515b444eb349134d9ad"><td class="memItemLeft" align="right" valign="top"><a id="a43e0a97c0d8ad515b444eb349134d9ad"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>comma</b> = ','</td></tr>
<tr class="separator:a43e0a97c0d8ad515b444eb349134d9ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6566afc517c1e78ec8c5d1254968b8de"><td class="memItemLeft" align="right" valign="top"><a id="a6566afc517c1e78ec8c5d1254968b8de"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>colons</b> = ':'</td></tr>
<tr class="separator:a6566afc517c1e78ec8c5d1254968b8de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22eabf79fefb1021751f5c96dba82c1"><td class="memItemLeft" align="right" valign="top"><a id="af22eabf79fefb1021751f5c96dba82c1"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>S_str</b> = 'S'</td></tr>
<tr class="separator:af22eabf79fefb1021751f5c96dba82c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a372df28ca2dd6d5c28b2e24f8b2191b1"><td class="memItemLeft" align="right" valign="top"><a id="a372df28ca2dd6d5c28b2e24f8b2191b1"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>C_str</b> = 'C'</td></tr>
<tr class="separator:a372df28ca2dd6d5c28b2e24f8b2191b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad192efa8f8a61829c3f21b83dccaa8a4"><td class="memItemLeft" align="right" valign="top"><a id="ad192efa8f8a61829c3f21b83dccaa8a4"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>V_str</b> = 'V'</td></tr>
<tr class="separator:ad192efa8f8a61829c3f21b83dccaa8a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5286907f5157a3240106f0dfa37d5dc"><td class="memItemLeft" align="right" valign="top"><a id="af5286907f5157a3240106f0dfa37d5dc"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>I_str</b> = 'I'</td></tr>
<tr class="separator:af5286907f5157a3240106f0dfa37d5dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda72d580036fe63aca283d37a974f36"><td class="memItemLeft" align="right" valign="top"><a id="adda72d580036fe63aca283d37a974f36"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>T_str</b> = 'T'</td></tr>
<tr class="separator:adda72d580036fe63aca283d37a974f36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70c943b584242ce58c0ded2ab26abcc5"><td class="memItemLeft" align="right" valign="top"><a id="a70c943b584242ce58c0ded2ab26abcc5"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>Q_str</b> = 'Q'</td></tr>
<tr class="separator:a70c943b584242ce58c0ded2ab26abcc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5fe4dd2877e813e414fcec5a01056bd"><td class="memItemLeft" align="right" valign="top"><a id="ab5fe4dd2877e813e414fcec5a01056bd"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>R_str</b> = 'R'</td></tr>
<tr class="separator:ab5fe4dd2877e813e414fcec5a01056bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af97d1d3fa767a6ec1ac8a236112a065d"><td class="memItemLeft" align="right" valign="top"><a id="af97d1d3fa767a6ec1ac8a236112a065d"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>W_str</b> = 'W'</td></tr>
<tr class="separator:af97d1d3fa767a6ec1ac8a236112a065d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91e529a9e95de4d3e44000218b5f02b3"><td class="memItemLeft" align="right" valign="top"><a id="a91e529a9e95de4d3e44000218b5f02b3"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>press_s_str</b> [] = &quot;Press 's' to start: &quot;</td></tr>
<tr class="separator:a91e529a9e95de4d3e44000218b5f02b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e72a8140df9b0184966d82a224e4a43"><td class="memItemLeft" align="right" valign="top"><a id="a4e72a8140df9b0184966d82a224e4a43"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>starting_str</b> [] = &quot;Starting...&quot;</td></tr>
<tr class="separator:a4e72a8140df9b0184966d82a224e4a43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a710856a549a2706083bdd369b95bc179"><td class="memItemLeft" align="right" valign="top"><a id="a710856a549a2706083bdd369b95bc179"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>done_str</b> [] = &quot;DONE&quot;</td></tr>
<tr class="separator:a710856a549a2706083bdd369b95bc179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d30ddd22dad30b60ffed7aa3b538f5a"><td class="memItemLeft" align="right" valign="top"><a id="a9d30ddd22dad30b60ffed7aa3b538f5a"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>num_1and2_str</b> [] = &quot;Please input a number between 1 and 2&quot;</td></tr>
<tr class="separator:a9d30ddd22dad30b60ffed7aa3b538f5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a814d4440d23060c6d7ca647e050f7cfd"><td class="memItemLeft" align="right" valign="top"><a id="a814d4440d23060c6d7ca647e050f7cfd"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>num_1and3_str</b> [] = &quot;Please input a number between 1 and 3&quot;</td></tr>
<tr class="separator:a814d4440d23060c6d7ca647e050f7cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe2d116bb9b6a4a402c4210368292297"><td class="memItemLeft" align="right" valign="top"><a id="afe2d116bb9b6a4a402c4210368292297"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>num_1and4_str</b> [] = &quot;Please input a number between 1 and 4&quot;</td></tr>
<tr class="separator:afe2d116bb9b6a4a402c4210368292297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c2cf123a74c2b276de0c32bb88cc87"><td class="memItemLeft" align="right" valign="top"><a id="a27c2cf123a74c2b276de0c32bb88cc87"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>param_def_str</b> [] = &quot;---Parameter definition for charger and discharger---&quot;</td></tr>
<tr class="separator:a27c2cf123a74c2b276de0c32bb88cc87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e84886842df542b6aa4117a4985997b"><td class="memItemLeft" align="right" valign="top"><a id="a6e84886842df542b6aa4117a4985997b"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>restarting_str</b> [] = &quot;Restarting...&quot;</td></tr>
<tr class="separator:a6e84886842df542b6aa4117a4985997b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa18f769fd923582d32f0e1ceb9ff1a3e"><td class="memItemLeft" align="right" valign="top"><a id="aa18f769fd923582d32f0e1ceb9ff1a3e"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>chem_def_liion</b> [] = &quot;Chemistry defined as Li-Ion&quot;</td></tr>
<tr class="separator:aa18f769fd923582d32f0e1ceb9ff1a3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71f311f1a8aac2bf591ed9455ed9cba"><td class="memItemLeft" align="right" valign="top"><a id="ab71f311f1a8aac2bf591ed9455ed9cba"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>chem_def_nimh</b> [] = &quot;Chemistry defined as Ni-MH&quot;</td></tr>
<tr class="separator:ab71f311f1a8aac2bf591ed9455ed9cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b007f16888d4d20e6e9a8c9ddb5034e"><td class="memItemLeft" align="right" valign="top"><a id="a2b007f16888d4d20e6e9a8c9ddb5034e"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>mV_str</b> [] = &quot; mV&quot;</td></tr>
<tr class="separator:a2b007f16888d4d20e6e9a8c9ddb5034e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a182c823b33a629ff5d6e32bb03725f0d"><td class="memItemLeft" align="right" valign="top"><a id="a182c823b33a629ff5d6e32bb03725f0d"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>mAh_str</b> [] = &quot; mAh&quot;</td></tr>
<tr class="separator:a182c823b33a629ff5d6e32bb03725f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429b7a40fb32bd9fa16ee483a111219e"><td class="memItemLeft" align="right" valign="top"><a id="a429b7a40fb32bd9fa16ee483a111219e"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>mA_str</b> [] = &quot; mA&quot;</td></tr>
<tr class="separator:a429b7a40fb32bd9fa16ee483a111219e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9393ea939d20c53efc26e49d05e9369d"><td class="memItemLeft" align="right" valign="top"><a id="a9393ea939d20c53efc26e49d05e9369d"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>EOD_V_str</b> [] = &quot;End of discharge voltage: &quot;</td></tr>
<tr class="separator:a9393ea939d20c53efc26e49d05e9369d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafae06f345b48fed8a1908d0cd0a84e2"><td class="memItemLeft" align="right" valign="top"><a id="aafae06f345b48fed8a1908d0cd0a84e2"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>EOC_I_str</b> [] = &quot;End of charge current: &quot;</td></tr>
<tr class="separator:aafae06f345b48fed8a1908d0cd0a84e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd010dae58c2494b4615f2bf35398424"><td class="memItemLeft" align="right" valign="top"><a id="acd010dae58c2494b4615f2bf35398424"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>EOC_DV_str</b> [] = &quot;End of charge voltage drop: &quot;</td></tr>
<tr class="separator:acd010dae58c2494b4615f2bf35398424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fff21a1610991bd0a87d0a2a77d0f60"><td class="memItemLeft" align="right" valign="top"><a id="a1fff21a1610991bd0a87d0a2a77d0f60"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>cho_bet_str</b> [] = &quot;Chose between following options: &quot;</td></tr>
<tr class="separator:a1fff21a1610991bd0a87d0a2a77d0f60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a284f0268ca3e501b485f8ee5549d27e2"><td class="memItemLeft" align="right" valign="top"><a id="a284f0268ca3e501b485f8ee5549d27e2"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>quarter_c_str</b> [] = &quot;(1) 0.25C&quot;</td></tr>
<tr class="separator:a284f0268ca3e501b485f8ee5549d27e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab969b52eb0314da6b83b35483dfba7a1"><td class="memItemLeft" align="right" valign="top"><a id="ab969b52eb0314da6b83b35483dfba7a1"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>half_c_str</b> [] = &quot;(2) 0.50C&quot;</td></tr>
<tr class="separator:ab969b52eb0314da6b83b35483dfba7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410ee1698dbdc5fdc0be790cfa7b03c0"><td class="memItemLeft" align="right" valign="top"><a id="a410ee1698dbdc5fdc0be790cfa7b03c0"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>one_c_str</b> [] = &quot;(3) 1C&quot;</td></tr>
<tr class="separator:a410ee1698dbdc5fdc0be790cfa7b03c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6892bda03919f5470b55eaa9b2d0c90"><td class="memItemLeft" align="right" valign="top"><a id="ab6892bda03919f5470b55eaa9b2d0c90"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>cell_str</b> [] = &quot;Cell &quot;</td></tr>
<tr class="separator:ab6892bda03919f5470b55eaa9b2d0c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a551eda5de85ae4fa3627d60ee229193b"><td class="memItemLeft" align="right" valign="top"><a id="a551eda5de85ae4fa3627d60ee229193b"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>dis_def_quarter_str</b> [] = &quot;Discharge current defined as 0.25C&quot;</td></tr>
<tr class="separator:a551eda5de85ae4fa3627d60ee229193b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef170ec65796e63a3a46e5484d8b2f20"><td class="memItemLeft" align="right" valign="top"><a id="aef170ec65796e63a3a46e5484d8b2f20"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>dis_def_half_str</b> [] = &quot;Discharge current defined as 0.5C&quot;</td></tr>
<tr class="separator:aef170ec65796e63a3a46e5484d8b2f20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a769237f2584e8f3f2947ba11d7051b0d"><td class="memItemLeft" align="right" valign="top"><a id="a769237f2584e8f3f2947ba11d7051b0d"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>dis_def_one_str</b> [] = &quot;Discharge current defined as 1C&quot;</td></tr>
<tr class="separator:a769237f2584e8f3f2947ba11d7051b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf6025401978a7fcc9e78daebfb90576"><td class="memItemLeft" align="right" valign="top"><a id="adf6025401978a7fcc9e78daebfb90576"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>char_def_quarter_str</b> [] = &quot;Charge current defined as 0.25C&quot;</td></tr>
<tr class="separator:adf6025401978a7fcc9e78daebfb90576"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02c81aa640f888c1f0c830471cc24a82"><td class="memItemLeft" align="right" valign="top"><a id="a02c81aa640f888c1f0c830471cc24a82"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>char_def_half_str</b> [] = &quot;Charge current defined as 0.5C&quot;</td></tr>
<tr class="separator:a02c81aa640f888c1f0c830471cc24a82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa01e0b2be9a3c5ff2080ba709348d2ff"><td class="memItemLeft" align="right" valign="top"><a id="aa01e0b2be9a3c5ff2080ba709348d2ff"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>char_def_one_str</b> [] = &quot;Charge current defined as 1C&quot;</td></tr>
<tr class="separator:aa01e0b2be9a3c5ff2080ba709348d2ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac61f3ba257415a95ef8f00e5c5c44eb2"><td class="memItemLeft" align="right" valign="top"><a id="ac61f3ba257415a95ef8f00e5c5c44eb2"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>cv_val_str</b> [] = &quot;Constant voltage value: &quot;</td></tr>
<tr class="separator:ac61f3ba257415a95ef8f00e5c5c44eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0adfbdf284ca1b13c49058b9b6c139f6"><td class="memItemLeft" align="right" valign="top"><a id="a0adfbdf284ca1b13c49058b9b6c139f6"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>nom_cap_str</b> [] = &quot;Nominal capacity: &quot;</td></tr>
<tr class="separator:a0adfbdf284ca1b13c49058b9b6c139f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7f6c7694f68bfdc6d42edf38d098c8a"><td class="memItemLeft" align="right" valign="top"><a id="ab7f6c7694f68bfdc6d42edf38d098c8a"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>def_char_curr_str</b> [] = &quot;Define charge current (input the number): &quot;</td></tr>
<tr class="separator:ab7f6c7694f68bfdc6d42edf38d098c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2942d095029e520cd38bcae077dfdb05"><td class="memItemLeft" align="right" valign="top"><a id="a2942d095029e520cd38bcae077dfdb05"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>def_disc_curr_str</b> [] = &quot;Define discharge current (input the number): &quot;</td></tr>
<tr class="separator:a2942d095029e520cd38bcae077dfdb05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ab8f2affad053697db60e7c2ec83266"><td class="memItemLeft" align="right" valign="top"><a id="a2ab8f2affad053697db60e7c2ec83266"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>def_num_cell_str</b> [] = &quot;Define number of cells to be tested (input the number, maximum of 4): &quot;</td></tr>
<tr class="separator:a2ab8f2affad053697db60e7c2ec83266"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac62f424eed8df92c38c616425f2bdb99"><td class="memItemLeft" align="right" valign="top"><a id="ac62f424eed8df92c38c616425f2bdb99"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>num_cell_str</b> [] = &quot;Number of cells to be tested: &quot;</td></tr>
<tr class="separator:ac62f424eed8df92c38c616425f2bdb99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1708638a3711c33c3754818b88aaab"><td class="memItemLeft" align="right" valign="top"><a id="a1c1708638a3711c33c3754818b88aaab"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>one_str</b> [] = &quot;1&quot;</td></tr>
<tr class="separator:a1c1708638a3711c33c3754818b88aaab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4501e00437dc146c0fed3e12d7db1638"><td class="memItemLeft" align="right" valign="top"><a id="a4501e00437dc146c0fed3e12d7db1638"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>two_str</b> [] = &quot;2&quot;</td></tr>
<tr class="separator:a4501e00437dc146c0fed3e12d7db1638"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6867a7d1919a8ea0fae36ebcf788af9"><td class="memItemLeft" align="right" valign="top"><a id="ad6867a7d1919a8ea0fae36ebcf788af9"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>three_str</b> [] = &quot;3&quot;</td></tr>
<tr class="separator:ad6867a7d1919a8ea0fae36ebcf788af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539dcdeb3c162e5f4b075c398f9f439d"><td class="memItemLeft" align="right" valign="top"><a id="a539dcdeb3c162e5f4b075c398f9f439d"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>four_str</b> [] = &quot;4&quot;</td></tr>
<tr class="separator:a539dcdeb3c162e5f4b075c398f9f439d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0627a57f283baa5ab2665749acd118f2"><td class="memItemLeft" align="right" valign="top"><a id="a0627a57f283baa5ab2665749acd118f2"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_1_str</b> [] = &quot;(1) Predischarge-&gt;Charge-&gt;Discharge-&gt;Postcharge&quot;</td></tr>
<tr class="separator:a0627a57f283baa5ab2665749acd118f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a103590cbaa0ac12766c4195813c2a64d"><td class="memItemLeft" align="right" valign="top"><a id="a103590cbaa0ac12766c4195813c2a64d"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_2_str</b> [] = &quot;(2) Charge-&gt;Discharge&quot;</td></tr>
<tr class="separator:a103590cbaa0ac12766c4195813c2a64d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98c57f34817da888d59ef90ee6c7bfc8"><td class="memItemLeft" align="right" valign="top"><a id="a98c57f34817da888d59ef90ee6c7bfc8"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_3_str</b> [] = &quot;(3) Only Charge&quot;</td></tr>
<tr class="separator:a98c57f34817da888d59ef90ee6c7bfc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70e90efb0323214d9055083fe25bc566"><td class="memItemLeft" align="right" valign="top"><a id="a70e90efb0323214d9055083fe25bc566"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_4_str</b> [] = &quot;(4) Only Discharge&quot;</td></tr>
<tr class="separator:a70e90efb0323214d9055083fe25bc566"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd6e863e75381f276fe2420b9ded0cb"><td class="memItemLeft" align="right" valign="top"><a id="a6cd6e863e75381f276fe2420b9ded0cb"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_1_sel_str</b> [] = &quot;Predischarge-&gt;Charge-&gt;Discharge-&gt;Postcharge selected...&quot;</td></tr>
<tr class="separator:a6cd6e863e75381f276fe2420b9ded0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a069422f5f724d21f518c42b9fd6bde"><td class="memItemLeft" align="right" valign="top"><a id="a1a069422f5f724d21f518c42b9fd6bde"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_2_sel_str</b> [] = &quot;Charge-&gt;Discharge selected...&quot;</td></tr>
<tr class="separator:a1a069422f5f724d21f518c42b9fd6bde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfff49bdd1487d0491bb87b851acc7cf"><td class="memItemLeft" align="right" valign="top"><a id="abfff49bdd1487d0491bb87b851acc7cf"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_3_sel_str</b> [] = &quot;Only Charge selected...&quot;</td></tr>
<tr class="separator:abfff49bdd1487d0491bb87b851acc7cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e58f605e86847bfa935ab585f155161"><td class="memItemLeft" align="right" valign="top"><a id="a5e58f605e86847bfa935ab585f155161"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>op_4_sel_str</b> [] = &quot;Only Discharge selected...&quot;</td></tr>
<tr class="separator:a5e58f605e86847bfa935ab585f155161"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a138648efb4ba60bc05e036bfbac7572a"><td class="memItemLeft" align="right" valign="top"><a id="a138648efb4ba60bc05e036bfbac7572a"></a>
char const&#160;</td><td class="memItemRight" valign="bottom"><b>cell_below_str</b> [] = &quot;Cell below 0.9V or not present&quot;</td></tr>
<tr class="separator:a138648efb4ba60bc05e036bfbac7572a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>State machine header file for Charge and Discharge System. </p>
<dl class="section author"><dt>Author</dt><dd>Juan J. Rojas </dd></dl>
<dl class="section date"><dt>Date</dt><dd>7 Aug 2018 </dd></dl>
<dl class="section user"><dt>Institution:</dt><dd>LaSEINE / CeNT. Kyushu Institute of Technology. </dd></dl>
<dl class="section user"><dt>Mail (after leaving Kyutech):</dt><dd><a href="#" onclick="location.href='mai'+'lto:'+'jua'+'n.'+'roj'+'as'+'@te'+'c.'+'ac.'+'cr'; return false;">juan.<span style="display: none;">.nosp@m.</span>roja<span style="display: none;">.nosp@m.</span>s@tec<span style="display: none;">.nosp@m.</span>.ac.<span style="display: none;">.nosp@m.</span>cr</a> </dd></dl>
<dl class="section user"><dt>Git repository:</dt><dd><a href="https://bitbucket.org/juanjorojash/cell_charger_discharger">https://bitbucket.org/juanjorojash/cell_charger_discharger</a> </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae1cb4a0872e924cf862a97b33dd2edf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1cb4a0872e924cf862a97b33dd2edf0">&#9670;&nbsp;</a></span>STOP_CONVERTER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STOP_CONVERTER</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;{ RC3 = 0; RC4 = 0; <a class="el" href="charger__discharger_8h.html#ad08b23d03ea817ae428dd1cc1e1d8f1a">conv</a> = 0; RC5 = 0; <a class="el" href="charger__discharger_8h.html#adb07fc3f35b1ac3f277f3c4b80ce2269">dc</a> = <a class="el" href="charger__discharger_8h.html#a998e4507851dde706a60a5b475eb27ca">DC_MIN</a>; <a class="el" href="charger__discharger_8h.html#a93f3630c962d9bcafd71e4c4a03547c1">set_DC</a>(); <a class="el" href="charger__discharger_8h.html#a5bbc85db8cf08142e0984d07b97e722b">Cell_OFF</a>(); <a class="el" href="charger__discharger_8h.html#a2f57a3156036b713dc852737da390252">LOG_OFF</a>();}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop the converter. </p>
<p>Set <code>conv</code> to zero, turn off the main relay (<code>RC5</code>), set the duty cycle in <code>DC_MIN</code>, turn off all the cell relays in the switcher board, disable the logging of data to the terminal and the UART reception interrupts. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aa19be6305a5a4485e1e70de70ed7d677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa19be6305a5a4485e1e70de70ed7d677">&#9670;&nbsp;</a></span>states</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the State Machine enum </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6"></a>STANDBY&#160;</td><td class="fielddoc"><p>"Stand by" state, defined by function <a class="el" href="charger__discharger_8h.html#a617e0199133fdef0d3a3e6a4a4c39c7e">fSTANDBY()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677afd6a0e4343048b10646dd2976cc5ad18"></a>IDLE&#160;</td><td class="fielddoc"><p>"Idle" state, defined by function <a class="el" href="charger__discharger_8h.html#af14972c8bcddf306a0cc7f7f43a5e3c1">fIDLE()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677ab7f3a434cd7c576917ad58613673c571"></a>FAULT&#160;</td><td class="fielddoc"><p>"Fault" state, defined by function <a class="el" href="charger__discharger_8h.html#aa309f5ae96bb5d30d1097731fc373f1f">fFAULT()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a2df4f4d04ec310a30dd8eaac64f883a2"></a>ISDONE&#160;</td><td class="fielddoc"><p>"Is done" state, defined by function <a class="el" href="charger__discharger_8h.html#a6f57fe99a95d5951b37346f2e592a033">fISDONE()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a79a322ccb4b29b85b3cab52dbccefd17"></a>WAIT&#160;</td><td class="fielddoc"><p>"Wait" state, defined by function <a class="el" href="charger__discharger_8h.html#a621fb7a48066389e0889ad9f7413f6c9">fWAIT()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a95c89aa15e7cbe4ca2a03d955a4b067c"></a>PREDISCHARGE&#160;</td><td class="fielddoc"><p>"Predischarge" state, defined by function <a class="el" href="charger__discharger_8h.html#ad25aed7556b1faba14a86a62f1dd4f89">fDISCHARGE()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677aea7debd6c1f7cf2d27b8774acac4109f"></a>CHARGE&#160;</td><td class="fielddoc"><p>"Charge" state, defined by function <a class="el" href="charger__discharger_8h.html#a0c4e2b572b4dd0ba38a90c7721edf3d8">fCHARGE()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677adfece03792e81dc232ae4f15fee2a423"></a>DISCHARGE&#160;</td><td class="fielddoc"><p>"Discharge" state, defined by function <a class="el" href="charger__discharger_8h.html#ad25aed7556b1faba14a86a62f1dd4f89">fDISCHARGE()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a90827714b4165a402681b4ce4874e5f0"></a>POSTCHARGE&#160;</td><td class="fielddoc"><p>"Postcharge" state, defined by function <a class="el" href="charger__discharger_8h.html#a0c4e2b572b4dd0ba38a90c7721edf3d8">fCHARGE()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a5d64f3582250fabf9443c93ca77ecf9c"></a>DS_DC_res&#160;</td><td class="fielddoc"><p>"Discharged state DC resistance" state, defined by function <a class="el" href="charger__discharger_8h.html#a0b36b83531f2626d071ba3d1115ba83f">fDC_res()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a031d03f2aee61a88f34151e0b532df5b"></a>CS_DC_res&#160;</td><td class="fielddoc"><p>"Charged state DC resistance" state, defined by function <a class="el" href="charger__discharger_8h.html#a0b36b83531f2626d071ba3d1115ba83f">fDC_res()</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="aa19be6305a5a4485e1e70de70ed7d677a68bd1d9b6b5d032caefff13585f9d22b"></a>PS_DC_res&#160;</td><td class="fielddoc"><p>"Postcharged state DC resistance" state, defined by function <a class="el" href="charger__discharger_8h.html#a0b36b83531f2626d071ba3d1115ba83f">fDC_res()</a> </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab2f580a1d85442504950b07e3c8f1145"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2f580a1d85442504950b07e3c8f1145">&#9670;&nbsp;</a></span>calculate_avg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void calculate_avg </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calculate the averages. </p>
<p>If <a class="el" href="charger__discharger_8h.html#af6a39bfc7e1dc3b6f9c997c1c43fa996" title="Counter that should be cleared every second. Initialized as COUNTER.">count</a> = <a class="el" href="charger__discharger_8h.html#a7194053a42881b1b4bc8546b4c8713e9" title="Counter value, needed to obtained one second between counts.">COUNTER</a></p>
<ul>
<li>Make <a class="el" href="charger__discharger_8h.html#a0799e1bdc59344ad781f8ed52b3d9189" title="Last one-second-average of i . Initialized as 0.">iavg</a> zero</li>
<li>Make <a class="el" href="charger__discharger_8h.html#aec6644dbb58ba751b340bd155b9e3cdc" title="Last one-second-average of v . Initialized as 0.">vavg</a> zero</li>
<li>Make <a class="el" href="charger__discharger_8h.html#a2d8afe51d9406df27f4388df51b61e38" title="Last one-second-average of t . Initialized as 0.">tavg</a> zero</li>
</ul>
<p>If <a class="el" href="charger__discharger_8h.html#af6a39bfc7e1dc3b6f9c997c1c43fa996" title="Counter that should be cleared every second. Initialized as COUNTER.">count</a> = 0</p>
<ul>
<li>Divide the value stored in <a class="el" href="charger__discharger_8h.html#a0799e1bdc59344ad781f8ed52b3d9189" title="Last one-second-average of i . Initialized as 0.">iavg</a> between COUNTER to obtain the average</li>
<li>This is equivalent to vacum / 1024 = vacum / 2^10</li>
<li>This is equivalent to tacum / 1024 = tacum / 2^10</li>
</ul>
<p>If <a class="el" href="charger__discharger_8h.html#af6a39bfc7e1dc3b6f9c997c1c43fa996" title="Counter that should be cleared every second. Initialized as COUNTER.">count</a> is not any of the previous cases then</p>
<ul>
<li>Accumulate <a class="el" href="charger__discharger_8h.html#a78f7a37dba921e0b0347b960fb40bc51" title="Last current ADC measurement.">i</a> in <a class="el" href="charger__discharger_8h.html#a0799e1bdc59344ad781f8ed52b3d9189" title="Last one-second-average of i . Initialized as 0.">iavg</a></li>
<li>Accumulate <a class="el" href="charger__discharger_8h.html#ac5f38113a34f9eab3e7782eade81d266" title="Last voltage ADC measurement.">v</a> in <a class="el" href="charger__discharger_8h.html#aec6644dbb58ba751b340bd155b9e3cdc" title="Last one-second-average of v . Initialized as 0.">vavg</a></li>
<li>Accumulate <a class="el" href="charger__discharger_8h.html#a3636f663c6b00463f1bad29dd9617997" title="Last temperature ADC measurement.">t</a> in <a class="el" href="charger__discharger_8h.html#a2d8afe51d9406df27f4388df51b61e38" title="Last one-second-average of t . Initialized as 0.">tavg</a> </li>
</ul>

</div>
</div>
<a id="a1db67160f1d6e9368e8c07df1c904eb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1db67160f1d6e9368e8c07df1c904eb4">&#9670;&nbsp;</a></span>cc_cv_mode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cc_cv_mode </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>current_voltage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>reference_voltage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>CC_mode_status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function switches between CC and CV mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_voltage</td><td>average of current voltage </td></tr>
    <tr><td class="paramname">referece_voltage</td><td>voltage setpoint </td></tr>
    <tr><td class="paramname">CC_mode_status</td><td>current condition of <a class="el" href="charger__discharger_8h.html#ad4bb67368b5b95e33bae6d43ef3174a8" title="CC / CV selector. CC:  cmode = 1 . CV:  cmode = 0">cmode</a> variable </td></tr>
  </table>
  </dd>
</dl>
<p>If the current voltage is bigger than the CV setpoint and the system is in CC mode, then:</p>
<ol>
<li>
<p class="startli">The integral acummulator is cleared</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The system is set in CV mode by clearing the <a class="el" href="charger__discharger_8h.html#ad4bb67368b5b95e33bae6d43ef3174a8" title="CC / CV selector. CC:  cmode = 1 . CV:  cmode = 0">cmode</a> variable</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The proportional constant divider is set to <a class="el" href="charger__discharger_8h.html#a31ae8362bae13f23cc6b521a7499a5ee" title="Proportional constant divider for CV mode.">CV_kp</a></p>
<p class="endli"></p>
</li>
<li>
The integral constant divider is set to <a class="el" href="charger__discharger_8h.html#a57181200f8247c552f8d9751003d77c6" title="Integral constant divider for CV mode.">CV_ki</a> </li>
</ol>

</div>
</div>
<a id="a5bbc85db8cf08142e0984d07b97e722b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bbc85db8cf08142e0984d07b97e722b">&#9670;&nbsp;</a></span>Cell_OFF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cell_OFF </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function deactivate all relays in the switcher board. </p>
<ul>
<li>Turn OFF cell #1 by calling <a class="el" href="charger__discharger_8h.html#a5d22532f168369b94569754b7f7ab68a" title="Turn off Cell #1.">CELL1_OFF</a></li>
<li>Turn OFF cell #2 by calling <a class="el" href="charger__discharger_8h.html#a90c4d70ae1140ba070196ee2849ebe6a" title="Turn off Cell #2.">CELL2_OFF</a></li>
<li>Turn OFF cell #3 by calling <a class="el" href="charger__discharger_8h.html#adc5d280d7d71f8a100ebf4cbc527ed32" title="Turn off Cell #3.">CELL3_OFF</a></li>
<li>Turn OFF cell #4 by calling <a class="el" href="charger__discharger_8h.html#a856ad78c73c34cd8f5d366bac3291b62" title="Turn off Cell #4.">CELL4_OFF</a> </li>
</ul>

</div>
</div>
<a id="a75740b5600396316399a5608fe2cb4d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75740b5600396316399a5608fe2cb4d3">&#9670;&nbsp;</a></span>Cell_ON()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cell_ON </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function activate the desired relay in the switcher board according to the value of <a class="el" href="charger__discharger_8h.html#a2f582152bcd11169abaab8dfb2e0ae2a" title="Cell counter from &#39;1&#39; to &#39;4&#39;. Initialized as &#39;1&#39;.">cell_count</a>. </p>
<p>If cell_count = '1'</p>
<ul>
<li>Turn ON cell #1 by calling <a class="el" href="charger__discharger_8h.html#a1e9c25e86679ce9f50b90bb24cb4cb0e" title="Turn on Cell #1.">CELL1_ON</a></li>
<li>Turn OFF cell #2 by calling <a class="el" href="charger__discharger_8h.html#a90c4d70ae1140ba070196ee2849ebe6a" title="Turn off Cell #2.">CELL2_OFF</a></li>
<li>Turn OFF cell #3 by calling <a class="el" href="charger__discharger_8h.html#adc5d280d7d71f8a100ebf4cbc527ed32" title="Turn off Cell #3.">CELL3_OFF</a></li>
<li>Turn OFF cell #4 by calling <a class="el" href="charger__discharger_8h.html#a856ad78c73c34cd8f5d366bac3291b62" title="Turn off Cell #4.">CELL4_OFF</a></li>
<li>Turn OFF cell #1 by calling <a class="el" href="charger__discharger_8h.html#a5d22532f168369b94569754b7f7ab68a" title="Turn off Cell #1.">CELL1_OFF</a></li>
<li>Turn ON cell #2 by calling <a class="el" href="charger__discharger_8h.html#a60e0c2428211d907b105684c342a328b" title="Turn on Cell #2.">CELL2_ON</a></li>
<li>Turn OFF cell #3 by calling <a class="el" href="charger__discharger_8h.html#adc5d280d7d71f8a100ebf4cbc527ed32" title="Turn off Cell #3.">CELL3_OFF</a></li>
<li>Turn OFF cell #4 by calling <a class="el" href="charger__discharger_8h.html#a856ad78c73c34cd8f5d366bac3291b62" title="Turn off Cell #4.">CELL4_OFF</a></li>
<li>Turn OFF cell #1 by calling <a class="el" href="charger__discharger_8h.html#a5d22532f168369b94569754b7f7ab68a" title="Turn off Cell #1.">CELL1_OFF</a></li>
<li>Turn OFF cell #2 by calling <a class="el" href="charger__discharger_8h.html#a90c4d70ae1140ba070196ee2849ebe6a" title="Turn off Cell #2.">CELL2_OFF</a></li>
<li>Turn ON cell #3 by calling <a class="el" href="charger__discharger_8h.html#a83bd4e8fdca326c574ea1a8d5681041a" title="Turn on Cell #3.">CELL3_ON</a></li>
<li>Turn OFF cell #4 by calling <a class="el" href="charger__discharger_8h.html#a856ad78c73c34cd8f5d366bac3291b62" title="Turn off Cell #4.">CELL4_OFF</a></li>
<li>Turn OFF cell #1 by calling <a class="el" href="charger__discharger_8h.html#a5d22532f168369b94569754b7f7ab68a" title="Turn off Cell #1.">CELL1_OFF</a></li>
<li>Turn OFF cell #2 by calling <a class="el" href="charger__discharger_8h.html#a90c4d70ae1140ba070196ee2849ebe6a" title="Turn off Cell #2.">CELL2_OFF</a></li>
<li>Turn OFF cell #3 by calling <a class="el" href="charger__discharger_8h.html#adc5d280d7d71f8a100ebf4cbc527ed32" title="Turn off Cell #3.">CELL3_OFF</a></li>
<li>Turn ON cell #4 by calling <a class="el" href="charger__discharger_8h.html#a7c6de72b4cd58814b85d05c7448fb498" title="Turn on Cell #4.">CELL4_ON</a> </li>
</ul>

</div>
</div>
<a id="a4f05187afaedd0cd35e9137eaf557ef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f05187afaedd0cd35e9137eaf557ef8">&#9670;&nbsp;</a></span>control_loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void control_loop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function calls the PI control loop for current or voltage depending on the value of the <a class="el" href="charger__discharger_8h.html#ad4bb67368b5b95e33bae6d43ef3174a8" title="CC / CV selector. CC:  cmode = 1 . CV:  cmode = 0">cmode</a> variable. </p>
<p>If <a class="el" href="charger__discharger_8h.html#ad4bb67368b5b95e33bae6d43ef3174a8" title="CC / CV selector. CC:  cmode = 1 . CV:  cmode = 0">cmode</a> is cleared then</p>
<ul>
<li>The <a class="el" href="charger__discharger_8c.html#ac0a5face47787c24a8922e3a5b4274ee" title="This function defines the PI controller.">pid()</a> function is called with <code>feedback</code> = <a class="el" href="charger__discharger_8h.html#ac5f38113a34f9eab3e7782eade81d266" title="Last voltage ADC measurement.">v</a> and <code>setpoint</code> = <a class="el" href="charger__discharger_8h.html#a9677ac60c8e6bbdd674b48efcd82634e" title="Scaled voltage setpoint. Initialized as 0.">vref</a></li>
</ul>
<p>Else,</p>
<ul>
<li>The <a class="el" href="charger__discharger_8c.html#ac0a5face47787c24a8922e3a5b4274ee" title="This function defines the PI controller.">pid()</a> function is called with <code>feedback</code> = <a class="el" href="charger__discharger_8h.html#a78f7a37dba921e0b0347b960fb40bc51" title="Last current ADC measurement.">i</a> and <code>setpoint</code> = <a class="el" href="charger__discharger_8h.html#a18614df5d72e38b0006c070dcd4f8d86" title="Current setpoint. Initialized as 0.">iref</a></li>
</ul>
<p>The duty cycle is set by calling the <a class="el" href="charger__discharger_8c.html#a95853552054d1c99e8765eca54abb930" title="This function sets the desired duty cycle of the PWM.">set_DC()</a> function </p>

</div>
</div>
<a id="a116216d02b45c1207161f503bf20adbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a116216d02b45c1207161f503bf20adbc">&#9670;&nbsp;</a></span>converter_settings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void converter_settings </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to set the configurations of the converter. </p>
<ul>
<li>The proportional constant, <a class="el" href="charger__discharger_8h.html#a289f8a95d80e630813bce16c8697695d" title="Proportional compesator gain.">kp</a> is set to <a class="el" href="charger__discharger_8h.html#a07e4b1149c8a3d5d22e1d62cf1ac21a8" title="Proportional constant divider for CC mode.">CC_kp</a></li>
<li>The proportional constant, <a class="el" href="charger__discharger_8h.html#a289f8a95d80e630813bce16c8697695d" title="Proportional compesator gain.">kp</a> is set to <a class="el" href="charger__discharger_8h.html#a07e4b1149c8a3d5d22e1d62cf1ac21a8" title="Proportional constant divider for CC mode.">CC_kp</a></li>
<li>Start in constant current mode by setting. <a class="el" href="charger__discharger_8h.html#ad4bb67368b5b95e33bae6d43ef3174a8" title="CC / CV selector. CC:  cmode = 1 . CV:  cmode = 0">cmode</a></li>
<li>The #integral component of the compensator is set to zero.*/</li>
<li>Average capacity, #q_prom is set to zero.*/</li>
<li>Maximum averaged voltage, <a class="el" href="charger__discharger_8h.html#aa45bd3ba8988708cb8dbf2d44220ba9f" title="Maximum recorded average voltage.">vmax</a> is set to zero.*/</li>
<li>The <a class="el" href="charger__discharger_8c.html#a95853552054d1c99e8765eca54abb930" title="This function sets the desired duty cycle of the PWM.">set_DC()</a> function is called</li>
<li>The <a class="el" href="charger__discharger_8c.html#a1d26bd6e1261ba0d776c492ad35593f4" title="This function activate the desired relay in the switcher board according to the value of cell_count.">Cell_ON()</a> function is called</li>
</ul>
<p>If the current state is <code>POSTCHARGE</code> or <code>CHARGE</code> </p>
<ul>
<li>The current setpoint, <a class="el" href="charger__discharger_8h.html#a18614df5d72e38b0006c070dcd4f8d86" title="Current setpoint. Initialized as 0.">iref</a> is defined as <a class="el" href="charger__discharger_8h.html#a38a978425fed5c90cc54372956b304dd" title="Charging current in mA.">i_char</a></li>
<li>Charging #timeout is set to 10% more <b>only_for}_NIMH</b> </li>
<li>The charge/discharge relay is set in charge position by calling the SET_CHAR() macro</li>
</ul>
<p>If the current state is <code>PREDISCHARGE</code> or <code>DISCHARGE</code> </p>
<ul>
<li>The current setpoint, <a class="el" href="charger__discharger_8h.html#a18614df5d72e38b0006c070dcd4f8d86" title="Current setpoint. Initialized as 0.">iref</a> is defined as <a class="el" href="charger__discharger_8h.html#a8695876e1624c29ba67082bea20b2c83" title="Discharging current in mA.">i_disc</a></li>
<li>The charge/discharge relay is set in discharge position by calling the SET_DISC() macro</li>
</ul>
<p>If the current state is <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a031d03f2aee61a88f34151e0b532df5b" title="&quot;Charged state DC resistance&quot; state, defined by function fDC_res()">CS_DC_res</a>, <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a5d64f3582250fabf9443c93ca77ecf9c" title="&quot;Discharged state DC resistance&quot; state, defined by function fDC_res()">DS_DC_res</a> or <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a68bd1d9b6b5d032caefff13585f9d22b" title="&quot;Postcharged state DC resistance&quot; state, defined by function fDC_res()">PS_DC_res</a></p>
<ul>
<li>The current setpoint, <a class="el" href="charger__discharger_8h.html#a18614df5d72e38b0006c070dcd4f8d86" title="Current setpoint. Initialized as 0.">iref</a> is defined as <code> capacity / 5 </code></li>
<li>The <a class="el" href="charger__discharger_8h.html#aa0cf1e21feceacf62d2ea6af8bc03fe9" title="Counter for DC resistance. Initialized as 0.">dc_res_count</a> is set to <a class="el" href="charger__discharger_8h.html#aa2683ee4bd7cd9cdab8006368da6df09" title="How many seconds the DC resistance process takes.">DC_RES_SECS</a></li>
<li>The charge/discharge relay is set in discharge position by calling the SET_DISC() macro </li>
</ul>

</div>
</div>
<a id="a9fcc321fc8a8e5fb1c8aeeae5da8daf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fcc321fc8a8e5fb1c8aeeae5da8daf1">&#9670;&nbsp;</a></span>display_value_s()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_value_s </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function convert a number to string and then send it using UART. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>integer to be send </td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Define <code>buffer</code> to used it for store character storage</li>
<li>Convert <code>value</code> into a string and store it in <code>buffer</code> </li>
<li>Send <code>buffer</code> using <a class="el" href="charger__discharger_8c.html#ac27ccd7f2eb1f5e96bb091338acc1e7f" title="This function send a string using UART.">UART_send_string()</a> </li>
</ul>

</div>
</div>
<a id="a92a0c0757e4254434d1526372af3113d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92a0c0757e4254434d1526372af3113d">&#9670;&nbsp;</a></span>display_value_u()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void display_value_u </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function convert a number to string and then send it using UART. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>integer to be send </td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Define <code>buffer</code> to used it for store character storage</li>
<li>Convert <code>value</code> into a string and store it in <code>buffer</code> </li>
<li>Send <code>buffer</code> using <a class="el" href="charger__discharger_8c.html#ac27ccd7f2eb1f5e96bb091338acc1e7f" title="This function send a string using UART.">UART_send_string()</a> </li>
</ul>

</div>
</div>
<a id="a0c4e2b572b4dd0ba38a90c7721edf3d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c4e2b572b4dd0ba38a90c7721edf3d8">&#9670;&nbsp;</a></span>fCHARGE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fCHARGE </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function define the IDLE state of the state machine. </p>
<ul>
<li>Activate the logging by calling <a class="el" href="charger__discharger_8h.html#a4d26e5ca6078be961b6b42719ebca269" title="Turn OFF logging in the terminal.">LOG_ON()</a> macro</li>
<li>Activate control loop by setting <a class="el" href="charger__discharger_8h.html#ad08b23d03ea817ae428dd1cc1e1d8f1a" title="Turn controller ON(1) or OFF(0). Initialized as 0.">conv</a></li>
<li>Go to <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ab7f3a434cd7c576917ad58613673c571" title="&quot;Fault&quot; state, defined by function fFAULT()">FAULT</a> state</li>
<li>Send a warning message</li>
</ul>
<p>If the <a class="el" href="charger__discharger_8h.html#ab12828525693568ae9c217805bea1ef9" title="Used with store the value of the states enum. Initialized as STANDBY.">state</a> is <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677aea7debd6c1f7cf2d27b8774acac4109f" title="&quot;Charge&quot; state, defined by function fCHARGE()">CHARGE</a></p>
<p>If the chemistry is Ni-MH</p>
<ol type="1">
<li>Set <a class="el" href="charger__discharger_8h.html#ad24a7209740a83b880691380fbe8e0e9" title="Used to store the previous state. Initialized as STANDBY.">prev_state</a> equal to <a class="el" href="charger__discharger_8h.html#ab12828525693568ae9c217805bea1ef9" title="Used with store the value of the states enum. Initialized as STANDBY.">state</a></li>
<li>If <a class="el" href="charger__discharger_8h.html#aa138b263667688f0a28af01c14f90f8a" title="Four different options, look into param() for details.">option</a> is '3' then go to <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2df4f4d04ec310a30dd8eaac64f883a2" title="&quot;Is done&quot; state, defined by function fISDONE()">ISDONE</a> state</li>
<li>Else, go to <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a79a322ccb4b29b85b3cab52dbccefd17" title="&quot;Wait&quot; state, defined by function fWAIT()">WAIT</a> state</li>
<li>Set <a class="el" href="charger__discharger_8h.html#a0761a8f74c3606c287684200b561b807" title="Counter for waiting time between states. Initialized as 0.">wait_count</a> equal to <a class="el" href="charger__discharger_8h.html#ae7676cdfa371dfdcf6fb0687737c29a6" title="Time to wait before states, set to 10 minutes.">WAIT_TIME</a></li>
<li>Stop the converter by calling <a class="el" href="charger__discharger_8h.html#ae1cb4a0872e924cf862a97b33dd2edf0" title="Stop the converter.">STOP_CONVERTER()</a> macro </li>
</ol>

</div>
</div>
<a id="a0b36b83531f2626d071ba3d1115ba83f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b36b83531f2626d071ba3d1115ba83f">&#9670;&nbsp;</a></span>fDC_res()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fDC_res </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function define the IDLE state of the state machine. </p>
<ul>
<li>Activate control loop by setting <a class="el" href="charger__discharger_8h.html#ad08b23d03ea817ae428dd1cc1e1d8f1a" title="Turn controller ON(1) or OFF(0). Initialized as 0.">conv</a></li>
<li>If <a class="el" href="charger__discharger_8h.html#aa0cf1e21feceacf62d2ea6af8bc03fe9" title="Counter for DC resistance. Initialized as 0.">dc_res_count</a> is equal to 4 (CHANGE), then:</li>
</ul>
<p>I dont like this </p>

</div>
</div>
<a id="ad25aed7556b1faba14a86a62f1dd4f89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad25aed7556b1faba14a86a62f1dd4f89">&#9670;&nbsp;</a></span>fDISCHARGE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fDISCHARGE </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function define the IDLE state of the state machine. </p>
<ul>
<li>Activate the logging by calling <a class="el" href="charger__discharger_8h.html#a4d26e5ca6078be961b6b42719ebca269" title="Turn OFF logging in the terminal.">LOG_ON()</a> macro</li>
<li>Activate control loop by setting <a class="el" href="charger__discharger_8h.html#ad08b23d03ea817ae428dd1cc1e1d8f1a" title="Turn controller ON(1) or OFF(0). Initialized as 0.">conv</a></li>
<li>If <a class="el" href="charger__discharger_8h.html#aec6644dbb58ba751b340bd155b9e3cdc" title="Last one-second-average of v . Initialized as 0.">vavg</a> is below <a class="el" href="charger__discharger_8h.html#a87c08f93220186401fc9530f98a8cff3" title="End-of-dischage voltage in mV.">EOD_voltage</a> then</li>
</ul>
<ol type="1">
<li>Set <a class="el" href="charger__discharger_8h.html#ad24a7209740a83b880691380fbe8e0e9" title="Used to store the previous state. Initialized as STANDBY.">prev_state</a> equal to <a class="el" href="charger__discharger_8h.html#ab12828525693568ae9c217805bea1ef9" title="Used with store the value of the states enum. Initialized as STANDBY.">state</a></li>
<li>If <a class="el" href="charger__discharger_8h.html#aa138b263667688f0a28af01c14f90f8a" title="Four different options, look into param() for details.">option</a> is '2' or '4' then go to <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2df4f4d04ec310a30dd8eaac64f883a2" title="&quot;Is done&quot; state, defined by function fISDONE()">ISDONE</a> state</li>
<li>Else, go to <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a79a322ccb4b29b85b3cab52dbccefd17" title="&quot;Wait&quot; state, defined by function fWAIT()">WAIT</a> state</li>
<li>Set <a class="el" href="charger__discharger_8h.html#a0761a8f74c3606c287684200b561b807" title="Counter for waiting time between states. Initialized as 0.">wait_count</a> equal to <a class="el" href="charger__discharger_8h.html#ae7676cdfa371dfdcf6fb0687737c29a6" title="Time to wait before states, set to 10 minutes.">WAIT_TIME</a></li>
<li>Stop the converter by calling <a class="el" href="charger__discharger_8h.html#ae1cb4a0872e924cf862a97b33dd2edf0" title="Stop the converter.">STOP_CONVERTER()</a> macro </li>
</ol>

</div>
</div>
<a id="aa309f5ae96bb5d30d1097731fc373f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa309f5ae96bb5d30d1097731fc373f1f">&#9670;&nbsp;</a></span>fFAULT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fFAULT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function define the FAULT state of the state machine. </p>
<p>The function will stop the converter using <a class="el" href="charger__discharger_8h.html#ae1cb4a0872e924cf862a97b33dd2edf0" title="Stop the converter.">STOP_CONVERTER()</a> macro</p>
<p>The <code>state</code> will be set to <code>STANDBY</code> </p>

</div>
</div>
<a id="af14972c8bcddf306a0cc7f7f43a5e3c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af14972c8bcddf306a0cc7f7f43a5e3c1">&#9670;&nbsp;</a></span>fIDLE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fIDLE </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function define the IDLE state of the state machine. </p>
<p>At first, the function will call the #Start_state_machine() function.</p>
<p>Then, it will call the #Converter_settings() function.</p>
<p>Then, it will enable the USART reception interrupts to give the possibility to the user to press <b>ESC</b> to cancel or <b>n</b> to go to the next cell, at any time during the testing process </p>

</div>
</div>
<a id="a6f57fe99a95d5951b37346f2e592a033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f57fe99a95d5951b37346f2e592a033">&#9670;&nbsp;</a></span>fISDONE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fISDONE </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is executed every time a whole test process for one cell is finished. </p>
<p>The function will check if the current cell number (<code>cell_count</code>) is smaller than the number of cells to be tested (<code>cell_max</code>)</p>
<p>If the condition is <b>TRUE</b> the counter will be incremented</p>
<p>And the testin process of the next cell will be started by going to the <code>IDLE</code> state </p>

</div>
</div>
<a id="a617e0199133fdef0d3a3e6a4a4c39c7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a617e0199133fdef0d3a3e6a4a4c39c7e">&#9670;&nbsp;</a></span>fSTANDBY()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fSTANDBY </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function define the <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6" title="&quot;Stand by&quot; state, defined by function fSTANDBY()">STANDBY</a> state of the state machine. </p>
<ul>
<li>Stop the converter by calling the <a class="el" href="charger__discharger_8h.html#ae1cb4a0872e924cf862a97b33dd2edf0" title="Stop the converter.">STOP_CONVERTER()</a> macro</li>
<li>Disable the USART reception interrupts to avoid interference with the setting of parameters in the <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6" title="&quot;Stand by&quot; state, defined by function fSTANDBY()">STANDBY</a> state</li>
<li>Disable the Timer1 to avoid interference</li>
<li>Initialize <a class="el" href="charger__discharger_8h.html#aa138b263667688f0a28af01c14f90f8a" title="Four different options, look into param() for details.">option</a> to 0</li>
<li>Initialize <a class="el" href="charger__discharger_8h.html#a00fd8f059b9286917da9abe7e3561aaa" title="Number of cells to be tested. Initialized as 0.">cell_max</a> to 0</li>
<li>Initialize <a class="el" href="charger__discharger_8h.html#a2f582152bcd11169abaab8dfb2e0ae2a" title="Cell counter from &#39;1&#39; to &#39;4&#39;. Initialized as &#39;1&#39;.">cell_count</a> to '1'</li>
<li>Print message: <code> &mdash;Parameter definition for charger and discharger&mdash; </code></li>
</ul>
<p>If <a class="el" href="charger__discharger_8h.html#a28a6dfc4597c4f82e81b47ca06486504" title="Set this definition to 1 and NI_MH_CHEM to 0 to set the test Li-Ion cells.">LI_ION_CHEM</a> is set to <b>1</b> and <a class="el" href="charger__discharger_8h.html#a80362a7f4e241d7fd6bcc19d5f21ffd7" title="Set this definition to 1 and LI_ION_CHEM to 0 to set the test Ni-MH cells.">NI_MH_CHEM</a> is set to <b>0</b>, the folowing message will be displayed:</p>
<p>If <a class="el" href="charger__discharger_8h.html#a80362a7f4e241d7fd6bcc19d5f21ffd7" title="Set this definition to 1 and LI_ION_CHEM to 0 to set the test Ni-MH cells.">NI_MH_CHEM</a> is set to <b>1</b> and <a class="el" href="charger__discharger_8h.html#a28a6dfc4597c4f82e81b47ca06486504" title="Set this definition to 1 and NI_MH_CHEM to 0 to set the test Li-Ion cells.">LI_ION_CHEM</a> is set to <b>0</b>, the folowing message will be displayed:</p>
<ul>
<li><code> Chemistry defined as Ni-MH </code></li>
</ul>
<p>Call the <a class="el" href="state__machine_8c.html#a54ace7ad4925a44e0b916762be282d66" title="Function to define the parameters of the testing process for both chemistries.">param()</a> function </p>

</div>
</div>
<a id="a621fb7a48066389e0889ad9f7413f6c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a621fb7a48066389e0889ad9f7413f6c9">&#9670;&nbsp;</a></span>fWAIT()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fWAIT </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function define the IDLE state of the state machine. </p>
<p>MAYBEOK </p>

</div>
</div>
<a id="a9efe22aaead3a5e936b5df459de02eba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9efe22aaead3a5e936b5df459de02eba">&#9670;&nbsp;</a></span>initialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initialize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to initialize all the PIC16F1787 registers. </p>
<p><b> GENERAL </b></p>
<ul>
<li>Clear WDT by calling <code>CLRWDT()</code> </li>
<li>Allow change of individual WPU</li>
</ul>
<p><b> SYSTEM CLOCK </b></p>
<ul>
<li>Set clock to 32MHz (PLL is enabled)</li>
<li>Clock determined by FOSC&lt;2:0&gt; in Configuration Words</li>
<li>Enable PLL.</li>
</ul>
<p><b> RELAY OUPUTS </b></p>
<ul>
<li>Set RC3 as output. Set for discharge</li>
<li>Deactivate weak pull up in RC3</li>
<li>Set RC4 as output. Set for charge</li>
<li>Deactivate weak pull up in RC4</li>
<li>Set RC5 as output. ON/OFF relay</li>
<li>Deactivate weak pull up in RC5</li>
</ul>
<p><b> CELL SWITCHER OUPUTS </b></p>
<ul>
<li>Set RB2 as output. Set for Cell #1</li>
<li>Set RB2 as digital</li>
<li>Deactivate weak pull up in RB2</li>
<li>Set RB3 as output. Set for Cell #2</li>
<li>Set RB3 as digital</li>
<li>Deactivate weak pull up in RB3</li>
<li>Set RB4 as output. Set for Cell #3</li>
<li>Set RB4 as digital</li>
<li>Deactivate weak pull up in RB4</li>
<li>Set RB5 as output. Set for Cell #4</li>
<li>Set RB5 as digital</li>
<li>Deactivate weak pull up in RB5</li>
</ul>
<p><b>TIMER1</b> </p>
<ul>
<li>Synchronize asynchronous clock input with system clock (FOSC)</li>
<li>Dedicated Timer1 oscillator circuit disabled</li>
<li>Enables Timer1</li>
<li>Timer1 counts regardless of Timer1 gate function</li>
<li>Timer1 clock source is instruction clock (FOSC/4)</li>
<li>1:1 Prescale value</li>
<li>Set Timer1 register to overflow in 0.97562 ms</li>
</ul>
<p><b> PROGRAMMABLE SWITCH MODE CONTROL (PSMC) </b></p>
<ul>
<li>Clear PSMC1 configuration</li>
<li>No modulation</li>
<li>Driven by 64MHz PLL system clock</li>
<li>Set period register to overflow in 8us (125kHz)</li>
<li>Rising event starts from the beginning, i.e duty cycle is in-phase with the period</li>
<li>Single PWM activated in PSMC1C (RC2)</li>
<li>PWM PSMC1 output is active-high (RC2)</li>
<li>PSMC output is active in PSMC1C (RC2)</li>
<li>Period event occurs when PSMC1TMR = PSMC1PR</li>
<li>Rising edge event occurs when PSMC1TMR = PSMC1PH</li>
<li>Falling edge event occurs when PSMC1TMR = PSMC1DC</li>
<li>PSMC1 module is enable</li>
<li>Disable buffer load</li>
<li>Disable dead band</li>
<li>Operating mode: Single PWM</li>
<li>Set RC2 as output. PWM output</li>
<li>Deactivate weak pull up in RC2</li>
</ul>
<p><b>ADC</b> </p>
<ul>
<li>Set RA3 as input. VREF+</li>
<li>Set RA3 as analog</li>
<li>Deactivate weak pull up in RA3</li>
<li>Set RB1 as input. Voltage sense</li>
<li>Set RB1 as analog</li>
<li>Deactivate weak pull up in RB1</li>
<li>Set RB0 as input. Current sense</li>
<li>Set RB0 as analog</li>
<li>Deactivate weak pull up in RB0</li>
<li>Set RA5 as input. Temperature sense</li>
<li>Set RA5 as analog</li>
<li>Deactivate weak pull up in RA5</li>
<li>12-bit result</li>
<li>Clock selected as FOSC/32</li>
<li>Negative reference connected to VSS</li>
<li>Positive reference connected to VREF+</li>
<li>2's compliment result</li>
<li>Negative differential input given by ADNREF</li>
<li>ADC is enabled</li>
</ul>
<p><b>UART</b> </p>
<ul>
<li>RC6 selected as TX</li>
<li>RC7 selected as RX</li>
<li>High baud rate set</li>
<li>16-bit timer set</li>
<li>Asynchronous serial</li>
<li>Enable serial port pins</li>
<li>Enable transmission</li>
<li>Enable reception</li>
<li>8-bit transmission selected</li>
<li>8-bit reception selected</li>
<li>Disable UART reception interrupts</li>
<li>Disable UART transmission interrupts</li>
</ul>
<p><b>FINAL</b> </p>
<ul>
<li>Call <a class="el" href="charger__discharger_8h.html#ae1cb4a0872e924cf862a97b33dd2edf0" title="Stop the converter.">STOP_CONVERTER()</a> macro </li>
</ul>

</div>
</div>
<a id="a7a5aa8b76d80abb2edcde7be747f4370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a5aa8b76d80abb2edcde7be747f4370">&#9670;&nbsp;</a></span>interrupt_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void interrupt_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function activate the UART reception interruption. </p>
<ul>
<li>Define the variable <code>clear_buffer</code>, used to empty the UART buffer</li>
<li>Clear the reception buffer and store it in <code>clear_buffer</code> </li>
<li>Enable UART reception interrupts</li>
<li>Disable UART transmission interrupts</li>
</ul>
<p>The timing counter <a class="el" href="charger__discharger_8h.html#af6a39bfc7e1dc3b6f9c997c1c43fa996" title="Counter that should be cleared every second. Initialized as COUNTER.">count</a> will be initialized to zero, to start a full control loop cycle </p>

</div>
</div>
<a id="a0b8b498532d1d667c624601a3cf715bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b8b498532d1d667c624601a3cf715bc">&#9670;&nbsp;</a></span>log_control()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_control </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function takes care of calculating the average values printing the log data using the UART. </p>
<ul>
<li>Send a colons character</li>
<li>If <a class="el" href="charger__discharger_8h.html#af03cfc6ea64c1cf48f35ae59730afad6" title="Seconds counter, resetted after 59 seconds.">second</a> is smaller than 10 send a '0'</li>
<li>Send a comma character</li>
<li>Send a 'C'</li>
<li>Send a <a class="el" href="charger__discharger_8h.html#a2f582152bcd11169abaab8dfb2e0ae2a" title="Cell counter from &#39;1&#39; to &#39;4&#39;. Initialized as &#39;1&#39;.">cell_count</a> variable</li>
<li>Send a comma character</li>
<li>Send an 'S'</li>
<li>Send a comma character</li>
<li>Send a 'V'</li>
<li>Send a comma character</li>
<li>Send an 'I'</li>
<li>Send a comma character</li>
<li>Send a 'T'</li>
<li>Send a comma character</li>
<li>Send a 'Q'</li>
<li>Send a '&lt;'</li>
</ul>
<p>If <a class="el" href="charger__discharger_8h.html#a6d4067d47fba082577dc98dae5e53c48" title="Variable to indicate if the log is activated.">log_on</a> is cleared, call <a class="el" href="charger__discharger_8h.html#a59595b0c67a8bfb8dd65e914a18b83c7" title="Reset timers.">RESET_TIME()</a> </p>

</div>
</div>
<a id="ac441c35a0d7d01f983d6b3414944d62a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac441c35a0d7d01f983d6b3414944d62a">&#9670;&nbsp;</a></span>param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void param </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to define the parameters of the testing process for both chemistries. </p>
<p>First, this function will declare and intialize to zero a variable called <code>input</code>, which will be used to store the input of the user.</p>
<p>Then, it will show the pre-set parameters for charging that are:</p>
<p>For Li Ion:</p>
<div class="fragment"><div class="line"><a class="code" href="charger__discharger_8h.html#a5d26458814361e1cf732df92f7dbc2d9">Li_Ion_CV</a> = 4200 mV</div><div class="line"><a class="code" href="charger__discharger_8h.html#adb28139964ea13e391208ea07372cace">Li_Ion_CAP</a> = 3250 mAh </div></div><!-- fragment --><p>For Ni_MH:</p>
<div class="fragment"><div class="line"><a class="code" href="charger__discharger_8h.html#ac8b7523ae7285838d22d268d244e3e41">Ni_MH_CV</a> = 1700 mV <span class="comment">//Just for protection for now, maybe is not necessary to show it</span></div><div class="line"><a class="code" href="charger__discharger_8h.html#a94e2a4926de4ad984b884e1ea882f06a">Ni_MH_CAP</a> = 2500 mAh</div></div><!-- fragment --><p>The <code>capacity</code> will be set to <code>Ni_MH_CAP</code>.</p>
<p>For the charging current it will print three options:</p>
<ul>
<li>1) 0.25 C</li>
<li>2) 0.5 C</li>
<li>3) 1 C</li>
</ul>
<p>The user should input the desired option.</p>
<p>After chosing the charging current, the program will assign it to <code>i_char</code> and print it.</p>
<p>Unless the user press <em>ESC</em>, in that case the program will be restarted to the <code>STANBY</code> state.</p>
<p>If the user press something different from <b>1</b>, <b>2</b>, <b>3</b> or <b>ESC</b> the program will print a warning message and wait for a valid input.</p>
<p>Variable <code>input</code> is cleared</p>
<p>Next, the program will show the end-of-charge parameters that are:</p>
<p>For Li Ion, the end-of-charge current:</p>
<div class="fragment"><div class="line"><a class="code" href="charger__discharger_8h.html#a613a15ecc1a8e85198d8c93ce546fcf6">Li_Ion_EOC_I</a> = 100 mA</div></div><!-- fragment --><p>For Ni_MH, the end-of-charge voltage drop:</p>
<div class="fragment"><div class="line"><a class="code" href="charger__discharger_8h.html#ae0f8da57c2fb3c5701f9d5fe4685bcd8">Ni_MH_EOC_DV</a> = 10 mV</div></div><!-- fragment --><p>For the discharging current it will show three options:</p>
<ul>
<li>1) 0.25 C</li>
<li>2) 0.5 C</li>
<li>3) 1 C</li>
</ul>
<p>The user should input the desired option.</p>
<p>After chosing the discharging current, the program will assign it to <code>i_disc</code> and print it.</p>
<p>Unless the user press <em>ESC</em>, in that case the program will be restarted to the <code>STANBY</code> state.</p>
<p>If the user press something different from <em>1</em>, <em>2</em>, <em>3</em> or <em>ESC</em> the program will print a warning message and wait for a valid input.</p>
<p>Varible <code>input</code> is cleared</p>
<p>Next, the program will show the end-of-discharge voltage constant that is: ((CHANGE THIS STYLE))</p>
<p>For Li Ion:</p>
<div class="fragment"><div class="line"><a class="code" href="charger__discharger_8h.html#a5b5d74511caec60eedfdfbf9fe71ce94">Li_Ion_EOD_V</a> = 3000 mV</div></div><!-- fragment --><p>For Ni_MH:</p>
<div class="fragment"><div class="line"><a class="code" href="charger__discharger_8h.html#a42b65399d5bd123d6001f5a0cf3353e1">Ni_MH_EOD_V</a> = 1000 mV</div></div><!-- fragment --><p>For the test cycle it will show four options:</p>
<ul>
<li>1) Precharge-&gt;Discharge-&gt;Charge (includes DC resistance measure after charge and after discharge).</li>
<li>2) Discharge-&gt;Charge (includes DC resistance measure after charge and after discharge).</li>
<li>3) Only Charge</li>
<li>4) Only Discharge</li>
</ul>
<p>The user should input the desired option, which will be assigned to <code>option</code> </p>
<p>After that the program will print the selected option and:</p>
<p>Unless the user press <em>ESC</em>, in that case the program will be restarted to the <code>STANBY</code> state.</p>
<p>If the user press something different from <b>1</b>, <b>2</b>, <b>3</b>, <b>4</b> or <b>ESC</b> the program will print a warning message and wait for a valid input.</p>
<p>Then, the program will ask the user how many cells he wants to test (4 cells is the maximum):</p>
<p>The user should input the desired number, which will be assigned to <code>cell_max</code> </p>
<p>After that the program will print it.</p>
<p>Unless the user press <b>ESC</b>, in that case the program will be restarted to the <code>STANBY</code> state.</p>
<p>If the user press something different from <b>1</b>, <b>2</b>, <b>3</b>, <b>4</b> or <b>ESC</b> the program will print a warning message and wait for a valid input.</p>
<p>After the user has set the number of cells the program will go to the <code>IDLE</code> state. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="state__machine_8c.html#aab8843d66ed853494d05155924f4229e" title="This function define the IDLE state of the state machine.">fIDLE()</a> </dd></dl>

</div>
</div>
<a id="ac0a5face47787c24a8922e3a5b4274ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a5face47787c24a8922e3a5b4274ee">&#9670;&nbsp;</a></span>pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pid </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>feedback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>setpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function defines the PI controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">feedback</td><td>average of measured values for the control variable </td></tr>
    <tr><td class="paramname">setpoint</td><td>desire controlled output for the variable </td></tr>
  </table>
  </dd>
</dl>
<p>This function performs the folowing tasks:</p>
<ol>
<li>
<p class="startli">Calculate the error</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Make sure error is never above <a class="el" href="charger__discharger_8h.html#aadc49366a240cc84254d58cb455dee82" title="Maximum permisible error, useful to avoid ringing.">ERR_MAX</a></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Make sure error is never below <a class="el" href="charger__discharger_8h.html#a5bcad3156af59109b8ac2c78c588885a" title="Minimum permisible error, useful to avoid ringing.">ERR_MIN</a></p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Calculate the proportional component of compensator</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Calculate the integral component of compensator usign <a class="el" href="charger__discharger_8h.html#a2ab083909f4f4cd7c27bff01f9865da8" title="Integral acumulator of PI compensator.">intacum</a> to accumulate over cycles</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Combine proportinal and integral parts</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Sum the result to the previous duty cycle stored in the <a class="el" href="charger__discharger_8h.html#adb07fc3f35b1ac3f277f3c4b80ce2269" title="Duty cycle.">dc</a> variable</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Make sure the duty cycle is never above <a class="el" href="charger__discharger_8h.html#a701d2222601b84faafa94cb1909df104" title="Maximum possible duty cycle, set around 0.8.">DC_MAX</a></p>
<p class="endli"></p>
</li>
<li>
Make sure duty cycle is never below <a class="el" href="charger__discharger_8h.html#a998e4507851dde706a60a5b475eb27ca" title="Minimum possible duty cycle, set around 0.1.">DC_MIN</a> </li>
</ol>

</div>
</div>
<a id="a8eda4a7f25b80578a7cee00f6c9b6e4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8eda4a7f25b80578a7cee00f6c9b6e4a">&#9670;&nbsp;</a></span>scaling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scaling </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function takes care of scaling the average values to correspond with their real values. </p>
<p>This function performs the folowing tasks: </p>
<ol>
<li>
<p class="startli">Scale <a class="el" href="charger__discharger_8h.html#a0799e1bdc59344ad781f8ed52b3d9189" title="Last one-second-average of i . Initialized as 0.">iavg</a> according to the 12-bit ADC resolution (4096) and the sensitivity of the sensor (0.4 V/A).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Scale <a class="el" href="charger__discharger_8h.html#aec6644dbb58ba751b340bd155b9e3cdc" title="Last one-second-average of v . Initialized as 0.">vavg</a> according to the 12-bit ADC resolution (4096)</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Scale <a class="el" href="charger__discharger_8h.html#a2d8afe51d9406df27f4388df51b61e38" title="Last one-second-average of t . Initialized as 0.">tavg</a> according to the 12-bit ADC resolution (4096) and the sensitivity of the sensor ( (1866.3 - x)/1.169 )</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Perform the discrete integration of <a class="el" href="charger__discharger_8h.html#a0799e1bdc59344ad781f8ed52b3d9189" title="Last one-second-average of i . Initialized as 0.">iavg</a> over one second and accumulate in <a class="el" href="charger__discharger_8h.html#a26dd2ede681df7d784fa64efc10d350a" title="Integration of i . Initialized as 0.">qavg</a></p>
<p class="endli"></p>
</li>
<li>
If the chemistry is Ni-MH and <a class="el" href="charger__discharger_8h.html#aec6644dbb58ba751b340bd155b9e3cdc" title="Last one-second-average of v . Initialized as 0.">vavg</a> is bigger than <a class="el" href="charger__discharger_8h.html#aa45bd3ba8988708cb8dbf2d44220ba9f" title="Maximum recorded average voltage.">vmax</a> then set <a class="el" href="charger__discharger_8h.html#aa45bd3ba8988708cb8dbf2d44220ba9f" title="Maximum recorded average voltage.">vmax</a> equal to <a class="el" href="charger__discharger_8h.html#aec6644dbb58ba751b340bd155b9e3cdc" title="Last one-second-average of v . Initialized as 0.">vavg</a> </li>
</ol>

</div>
</div>
<a id="a93f3630c962d9bcafd71e4c4a03547c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f3630c962d9bcafd71e4c4a03547c1">&#9670;&nbsp;</a></span>set_DC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_DC </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets the desired duty cycle of the PWM. </p>
<p>This function performs the folowing tasks: </p>
<ol>
<li>
<p class="startli">Load the duty cycle register of the PSMC with the <a class="el" href="charger__discharger_8h.html#adb07fc3f35b1ac3f277f3c4b80ce2269" title="Duty cycle.">dc</a> variable</p>
<p class="endli"></p>
</li>
<li>
Set the load register. This will load all the setting at once </li>
</ol>

</div>
</div>
<a id="aa37d23c2482420861e3f4580cfbbdb2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa37d23c2482420861e3f4580cfbbdb2a">&#9670;&nbsp;</a></span>start_state_machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void start_state_machine </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to start the state machine. </p>
<p>First,</p>
<p>Check the option (CHANGE)</p>
<blockquote class="doxtable">
<p>if @option is equal to <b>1</b> it will set the <code>state</code> as <code>PREDISCHARGE</code> </p>
</blockquote>
<blockquote class="doxtable">
<p>if @option is equal to <b>2</b> it will set the <code>state</code> as <code>CHARGE</code> </p>
</blockquote>
<blockquote class="doxtable">
<p>if @option is equal to <b>3</b> it will set the <code>state</code> as <code>CHARGE</code> </p>
</blockquote>
<blockquote class="doxtable">
<p>if @option is equal to <b>4</b> it will set the <code>state</code> as <code>DISCHARGE</code> </p>
</blockquote>
<p>First, this function will declare and initialized to zero a variable called <code>start</code>, which will be used to store the input of the user.</p>
<p>If the current cell is the first (<code>cell_count</code>) , it will ask for user intervention to start.</p>
<p>It will prompt the user to press <b>s</b>.</p>
<p>`The key pressed by the user will be assigned to <code>start</code>.</p>
<p>If the user press <b>s</b>, the program will start.</p>
<p>The user also can press <b>ESC</b> and the program will be restarted to the <code>STANBY</code> state.</p>
<p>If the user press something different from <b>s</b>, or <b>ESC</b> the program will print a warning message and wait for a valid input.</p>
<p>If the current cell is <b>not</b> <b>'1'</b> the program will start without the user intervention.</p>
<p>Before starting, the program will print the following:</p>
<p>Starting...</p>
<p>Cell {1,2,3 or 4} </p>

</div>
</div>
<a id="a5b7665498c6c3419b3a6d53d4d2e25d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b7665498c6c3419b3a6d53d4d2e25d9">&#9670;&nbsp;</a></span>state_machine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void state_machine </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function contain the transition definition for the states of the machine. </p>
<p>The <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6" title="&quot;Stand by&quot; state, defined by function fSTANDBY()">STANDBY</a> state goes to the <a class="el" href="state__machine_8c.html#a615d15018432f32225d7680126353f7b" title="This function define the STANDBY state of the state machine.">fSTANDBY()</a> function.</p>
<p>The <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677afd6a0e4343048b10646dd2976cc5ad18" title="&quot;Idle&quot; state, defined by function fIDLE()">IDLE</a> state goes to the <a class="el" href="state__machine_8c.html#aab8843d66ed853494d05155924f4229e" title="This function define the IDLE state of the state machine.">fIDLE()</a> function.</p>
<p>The <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a95c89aa15e7cbe4ca2a03d955a4b067c" title="&quot;Predischarge&quot; state, defined by function fDISCHARGE()">PREDISCHARGE</a> and <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677adfece03792e81dc232ae4f15fee2a423" title="&quot;Discharge&quot; state, defined by function fDISCHARGE()">DISCHARGE</a> states go to the <a class="el" href="state__machine_8c.html#a472415d54e3ef78c66a3f751e4eec24c" title="This function define the IDLE state of the state machine.">fDISCHARGE()</a> function.</p>
<p>And the <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a90827714b4165a402681b4ce4874e5f0" title="&quot;Postcharge&quot; state, defined by function fCHARGE()">POSTCHARGE</a> and <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677aea7debd6c1f7cf2d27b8774acac4109f" title="&quot;Charge&quot; state, defined by function fCHARGE()">CHARGE</a> states go to the <a class="el" href="state__machine_8c.html#a2f63169934c3ee15942c859a2619e78e" title="This function define the IDLE state of the state machine.">fCHARGE()</a> function.</p>
<p>The <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a031d03f2aee61a88f34151e0b532df5b" title="&quot;Charged state DC resistance&quot; state, defined by function fDC_res()">CS_DC_res</a> , <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a5d64f3582250fabf9443c93ca77ecf9c" title="&quot;Discharged state DC resistance&quot; state, defined by function fDC_res()">DS_DC_res</a> and <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a68bd1d9b6b5d032caefff13585f9d22b" title="&quot;Postcharged state DC resistance&quot; state, defined by function fDC_res()">PS_DC_res</a> states go to the <a class="el" href="state__machine_8c.html#abfbd54f51445d45b916ee44c9c1d24ae" title="This function define the IDLE state of the state machine.">fDC_res()</a> function.</p>
<p>The <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a79a322ccb4b29b85b3cab52dbccefd17" title="&quot;Wait&quot; state, defined by function fWAIT()">WAIT</a> state goes to the <a class="el" href="state__machine_8c.html#a921708424dee13fb5c6f6f1029723cea" title="This function define the IDLE state of the state machine.">fWAIT()</a> function.</p>
<p>The <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2df4f4d04ec310a30dd8eaac64f883a2" title="&quot;Is done&quot; state, defined by function fISDONE()">ISDONE</a> state goes to the <a class="el" href="state__machine_8c.html#a7d80f4f910216189739bef97a1122ccb" title="This function is executed every time a whole test process for one cell is finished.">fISDONE()</a> function.</p>
<p>The <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ab7f3a434cd7c576917ad58613673c571" title="&quot;Fault&quot; state, defined by function fFAULT()">FAULT</a> state goes to the <a class="el" href="state__machine_8c.html#a357568e00e8e69fdae90ec29d83c8f35" title="This function define the FAULT state of the state machine.">fFAULT()</a> function. </p>

</div>
</div>
<a id="a4126a9c7eed2c3658428ce1613f62848"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4126a9c7eed2c3658428ce1613f62848">&#9670;&nbsp;</a></span>temp_protection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void temp_protection </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<ol type="1">
<li>Stop the converter by calling the <a class="el" href="charger__discharger_8h.html#ae1cb4a0872e924cf862a97b33dd2edf0" title="Stop the converter.">STOP_CONVERTER()</a> macro.</li>
<li>Go to the <a class="el" href="charger__discharger_8h.html#aa19be6305a5a4485e1e70de70ed7d677ae4634ae4352b512b38c5da9dc1610ca6" title="&quot;Stand by&quot; state, defined by function fSTANDBY()">STANDBY</a> state. </li>
</ol>

</div>
</div>
<a id="ad2a34e3f615b83a0c9d721b76899b2a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a34e3f615b83a0c9d721b76899b2a4">&#9670;&nbsp;</a></span>timing()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void timing </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function control the timing. </p>
<p>If <a class="el" href="charger__discharger_8h.html#af6a39bfc7e1dc3b6f9c997c1c43fa996" title="Counter that should be cleared every second. Initialized as COUNTER.">count</a> is other than zero, then</p>
<ul>
<li>Make <a class="el" href="charger__discharger_8h.html#af6a39bfc7e1dc3b6f9c997c1c43fa996" title="Counter that should be cleared every second. Initialized as COUNTER.">count</a> equal to <a class="el" href="charger__discharger_8h.html#a7194053a42881b1b4bc8546b4c8713e9" title="Counter value, needed to obtained one second between counts.">COUNTER</a></li>
<li>If <a class="el" href="charger__discharger_8h.html#af03cfc6ea64c1cf48f35ae59730afad6" title="Seconds counter, resetted after 59 seconds.">second</a> is smaller than 59 then increase it</li>
<li>Else, make <a class="el" href="charger__discharger_8h.html#af03cfc6ea64c1cf48f35ae59730afad6" title="Seconds counter, resetted after 59 seconds.">second</a> zero and increase <a class="el" href="charger__discharger_8h.html#aa9bb52078cb5c647a0dfef243db183d6" title="Minutes counter, only manually reset.">minute</a></li>
</ul>
<p>Else,</p>
<ul>
<li>Decrease it </li>
</ul>

</div>
</div>
<a id="ae033bb8a9289af391aef3cc3bd57a0e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae033bb8a9289af391aef3cc3bd57a0e9">&#9670;&nbsp;</a></span>UART_get_char()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char UART_get_char </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function receive one byte of data from UART. </p>
<dl class="section return"><dt>Returns</dt><dd>RC1REG reception register </dd></dl>
<p>If there is error</p>
<ul>
<li>Clear the error</li>
<li>Restart</li>
</ul>
<p>Hold the program until the reception buffer is free</p>
<p>Receive the value and return it </p>

</div>
</div>
<a id="abf92d1a230db7234bdf5119716a0cf5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf92d1a230db7234bdf5119716a0cf5f">&#9670;&nbsp;</a></span>UART_send_char()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UART_send_char </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>bt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function send one byte of data to UART. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bt</td><td>character to be send </td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>Hold the program until the transmission buffer is free</li>
<li>Load the transmission buffer with <code>bt</code> </li>
</ul>

</div>
</div>
<a id="ac27ccd7f2eb1f5e96bb091338acc1e7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac27ccd7f2eb1f5e96bb091338acc1e7f">&#9670;&nbsp;</a></span>UART_send_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UART_send_string </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>st_pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function send a string using UART. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">st_pt</td><td>pointer to string to be send </td></tr>
  </table>
  </dd>
</dl>
<p>While there is a byte to send</p>
<ul>
<li>Send it using <a class="el" href="charger__discharger_8c.html#abf92d1a230db7234bdf5119716a0cf5f" title="This function send one byte of data to UART.">UART_send_char()</a> and then increase the pointer possition </li>
</ul>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af6a39bfc7e1dc3b6f9c997c1c43fa996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6a39bfc7e1dc3b6f9c997c1c43fa996">&#9670;&nbsp;</a></span>count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t count = <a class="el" href="charger__discharger_8h.html#a7194053a42881b1b4bc8546b4c8713e9">COUNTER</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Counter that should be cleared every second. Initialized as <a class="el" href="charger__discharger_8h.html#a7194053a42881b1b4bc8546b4c8713e9" title="Counter value, needed to obtained one second between counts.">COUNTER</a>. </p>
<p>Every control loop cycle this counter will be decreased. This variable is used to calculate the averages and to trigger all the events that are done every second. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
